<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>NEXUS â€” India Alt Data Layer</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&display=swap" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #F2F2F7;
  --surface: #FFFFFF;
  --surface2: #FAFAFA;
  --border: rgba(0,0,0,0.07);
  --border-strong: rgba(0,0,0,0.13);
  --text: #1A1A1A;
  --text2: #636366;
  --text3: #AEAEB2;
  --blue: #0071E3;
  --blue-bg: #EBF3FD;
  --green: #30D158;
  --green-bg: #EDFAF2;
  --red: #FF453A;
  --red-bg: #FFF1F0;
  --orange: #FF9F0A;
  --orange-bg: #FFF8EC;
  --purple: #BF5AF2;
  --purple-bg: #F5F0FE;
  --teal: #32ADE6;
  --teal-bg: #EBF7FD;
  --gold: #F0A500;
  --sidebar-w: 248px;
  --radius: 16px;
  --radius-sm: 10px;
  --shadow: 0 1px 4px rgba(0,0,0,0.05), 0 0 0 1px rgba(0,0,0,0.06);
  --shadow-hover: 0 8px 28px rgba(0,0,0,0.12);
  --agent-bar-h: 34px;
}

html, body {
  height: 100%;
  overflow: hidden;
}

body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  flex-direction: column;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NEXUS AGENT CYCLE STATUS BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#agent-bar {
  height: var(--agent-bar-h);
  min-height: var(--agent-bar-h);
  background: linear-gradient(90deg, #0A0A1A 0%, #111827 50%, #0A0A1A 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  cursor: pointer;
  transition: background 0.2s;
  z-index: 200;
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
}
#agent-bar::before {
  content: '';
  position: absolute;
  top: 0; left: -100%;
  width: 60%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(48,209,88,0.06), transparent);
  animation: bar-sweep 4s infinite;
}
@keyframes bar-sweep { 0%{left:-100%} 100%{left:200%} }
#agent-bar:hover { background: linear-gradient(90deg, #0D1321 0%, #162032 50%, #0D1321 100%); }
.agent-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: #30D158;
  box-shadow: 0 0 8px rgba(48,209,88,0.8);
  animation: agent-pulse 1.8s infinite;
  flex-shrink: 0;
}
@keyframes agent-pulse {
  0%,100% { opacity: 1; box-shadow: 0 0 8px rgba(48,209,88,0.8); }
  50% { opacity: 0.6; box-shadow: 0 0 4px rgba(48,209,88,0.4); }
}
.agent-bar-text {
  font-size: 10.5px;
  font-weight: 600;
  color: rgba(255,255,255,0.75);
  letter-spacing: 0.2px;
  white-space: nowrap;
}
.agent-bar-text strong {
  color: #30D158;
  font-weight: 800;
  letter-spacing: 0.4px;
}
.agent-bar-divider {
  width: 1px; height: 12px;
  background: rgba(255,255,255,0.12);
  margin: 0 4px;
}
.agent-bar-sep {
  color: rgba(255,255,255,0.25);
  font-size: 10px;
  margin: 0 2px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AGENT CYCLE MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#agent-modal {
  display: none;
  position: fixed;
  top: var(--agent-bar-h);
  left: 50%;
  transform: translateX(-50%);
  width: 420px;
  background: #0D1321;
  border: 1px solid rgba(48,209,88,0.25);
  border-top: none;
  border-radius: 0 0 16px 16px;
  padding: 20px 22px;
  z-index: 999;
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  animation: modal-drop 0.2s ease;
}
@keyframes modal-drop { from { opacity:0; transform:translateX(-50%) translateY(-8px); } to { opacity:1; transform:translateX(-50%) translateY(0); } }
#agent-modal.visible { display: block; }
.agent-modal-title {
  font-family: 'Syne', sans-serif;
  font-weight: 800;
  font-size: 13px;
  color: white;
  letter-spacing: 0.3px;
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.agent-trace-line {
  font-family: 'DM Sans', monospace;
  font-size: 11.5px;
  color: rgba(255,255,255,0.6);
  padding: 7px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  display: flex;
  align-items: center;
  gap: 8px;
  line-height: 1.5;
}
.agent-trace-line .trace-icon {
  font-size: 11px;
  width: 16px;
  flex-shrink: 0;
}
.agent-trace-line.done { color: #30D158; }
.agent-trace-line.warn { color: #FF9F0A; }
.agent-modal-footer {
  margin-top: 12px;
  font-size: 10px;
  color: rgba(255,255,255,0.25);
  display: flex;
  justify-content: space-between;
}
#agent-modal-close {
  position: absolute;
  top: 14px; right: 16px;
  color: rgba(255,255,255,0.4);
  cursor: pointer;
  font-size: 14px;
  transition: color 0.14s;
}
#agent-modal-close:hover { color: rgba(255,255,255,0.8); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.platform { display: flex; flex: 1; overflow: hidden; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sidebar {
  width: var(--sidebar-w);
  min-width: var(--sidebar-w);
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(40px);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  z-index: 100;
  overflow-y: auto;
}
.sidebar::-webkit-scrollbar { display: none; }

.sidebar-logo {
  padding: 22px 18px 18px;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; gap: 10px;
  flex-shrink: 0;
}
.logo-mark {
  width: 34px; height: 34px;
  background: linear-gradient(135deg, #0071E3 0%, #34C759 100%);
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Syne', sans-serif; font-weight: 800; font-size: 13px; color: white;
  letter-spacing: -0.5px;
  box-shadow: 0 4px 14px rgba(0,113,227,0.35);
  flex-shrink: 0;
}
.logo-text { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 15px; letter-spacing: -0.4px; line-height: 1.1; }
.logo-sub { font-size: 9px; color: var(--text3); letter-spacing: 1.5px; text-transform: uppercase; }

.sidebar-section { padding: 14px 10px 6px; }
.sidebar-label {
  font-size: 9.5px; font-weight: 700; letter-spacing: 1.4px;
  text-transform: uppercase; color: var(--text3);
  padding: 0 8px 8px;
}

.nav-item {
  display: flex; align-items: center; gap: 9px;
  padding: 8px 8px; border-radius: 10px;
  cursor: pointer; transition: all 0.14s;
  font-size: 13px; font-weight: 500; color: var(--text2);
  margin-bottom: 1px; position: relative;
  text-decoration: none;
}
.nav-item:hover { background: var(--bg); color: var(--text); }
.nav-item.active { background: var(--blue-bg); color: var(--blue); }

.nav-icon {
  width: 28px; height: 28px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  background: var(--bg); font-size: 13px; flex-shrink: 0;
}
.nav-item.active .nav-icon { background: var(--blue); }

.nav-badge {
  margin-left: auto; background: var(--red); color: white;
  font-size: 9px; font-weight: 700; padding: 2px 5px;
  border-radius: 20px; line-height: 1.3;
}
.nav-badge.green { background: var(--green); }
.nav-badge.blue { background: var(--blue); }

.market-status {
  margin: 8px 10px 6px;
  padding: 10px 12px;
  background: rgba(48,209,88,0.08);
  border-radius: 10px;
  border: 1px solid rgba(48,209,88,0.2);
}
.market-header { display: flex; align-items: center; gap: 6px; margin-bottom: 5px; }
.pulse-dot {
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--green);
  animation: pulse 1.6s infinite;
}
@keyframes pulse { 0%,100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(0.8); } }
.market-label { font-size: 10px; font-weight: 800; color: #059669; letter-spacing: 0.5px; }
.market-row { font-size: 10px; color: var(--text2); margin-top: 2px; }
.market-row span { font-weight: 700; }
.up { color: var(--green); }
.down { color: var(--red); }

/* Portfolio mini-widget in sidebar */
.sidebar-portfolio {
  margin: 6px 10px 8px;
  padding: 10px 12px;
  background: rgba(0,113,227,0.06);
  border-radius: 10px;
  border: 1px solid rgba(0,113,227,0.15);
}
.sidebar-portfolio-label { font-size: 9px; letter-spacing: 1.2px; text-transform: uppercase; color: var(--text3); font-weight: 700; margin-bottom: 5px; }
.sidebar-portfolio-val { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 16px; color: var(--blue); letter-spacing: -0.5px; }
.sidebar-portfolio-sub { font-size: 9.5px; color: var(--text2); margin-top: 2px; }

.sidebar-bottom {
  margin-top: auto;
  padding: 12px 10px;
  border-top: 1px solid var(--border);
  flex-shrink: 0;
}
.user-chip {
  display: flex; align-items: center; gap: 9px;
  padding: 7px 8px; border-radius: 10px; cursor: pointer;
  transition: background 0.14s;
}
.user-chip:hover { background: var(--bg); }
.avatar {
  width: 30px; height: 30px; border-radius: 50%;
  background: linear-gradient(135deg, #0071E3, #BF5AF2);
  display: flex; align-items: center; justify-content: center;
  color: white; font-size: 11px; font-weight: 700;
  font-family: 'Syne', sans-serif; flex-shrink: 0;
}
.user-name { font-size: 12px; font-weight: 600; }
.user-role { font-size: 9.5px; color: var(--text3); }

/* â”€â”€ MAIN â”€â”€ */
.main { flex: 1; overflow-y: auto; overflow-x: hidden; position: relative; }
.main::-webkit-scrollbar { width: 4px; }
.main::-webkit-scrollbar-track { background: transparent; }
.main::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.15); border-radius: 4px; }

/* â”€â”€ TOPBAR â”€â”€ */
.topbar {
  position: sticky; top: 0; z-index: 50;
  background: rgba(242,242,247,0.9);
  backdrop-filter: blur(24px) saturate(180%);
  border-bottom: 1px solid var(--border);
  padding: 11px 26px;
  display: flex; align-items: center; gap: 14px;
}
.topbar-title {
  font-family: 'Syne', sans-serif; font-weight: 700;
  font-size: 18px; letter-spacing: -0.4px;
}
.topbar-sub { font-size: 11px; color: var(--text3); margin-top: 1px; }

.search-box {
  display: flex; align-items: center; gap: 8px;
  background: white; border: 1px solid var(--border);
  border-radius: 10px; padding: 7px 12px;
  font-size: 12.5px; color: var(--text2);
  cursor: pointer; min-width: 200px;
  box-shadow: var(--shadow);
  transition: box-shadow 0.2s;
  margin-left: auto;
}
.search-box:hover { box-shadow: var(--shadow-hover); }
.search-hint {
  margin-left: auto; font-size: 11px;
  background: #F0F0F0; padding: 2px 6px; border-radius: 5px; opacity: 0.6;
}

.live-chip {
  display: flex; align-items: center; gap: 5px;
  background: linear-gradient(135deg, var(--green-bg), #D1FAE5);
  border: 1px solid rgba(48,209,88,0.3);
  border-radius: 20px; padding: 5px 12px;
  font-size: 10.5px; font-weight: 700; color: #059669;
  letter-spacing: 0.3px; white-space: nowrap;
}
.live-dot { width: 6px; height: 6px; background: var(--green); border-radius: 50%; animation: pulse 1.6s infinite; }

.topbar-btn {
  width: 34px; height: 34px; border-radius: 10px;
  background: white; border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: all 0.14s; box-shadow: var(--shadow);
  font-size: 15px; position: relative; flex-shrink: 0;
}
.topbar-btn:hover { background: var(--blue); border-color: var(--blue); }
.notif-dot {
  position: absolute; top: 5px; right: 5px;
  width: 7px; height: 7px; background: var(--red);
  border-radius: 50%; border: 2px solid white;
}

/* â”€â”€ PAGES â”€â”€ */
.page { padding: 24px 26px 60px; }
.page { animation: fadeIn 0.2s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }

/* â”€â”€ CARDS â”€â”€ */
.card {
  background: white; border-radius: var(--radius);
  padding: 18px 20px; border: 1px solid var(--border);
  box-shadow: var(--shadow);
  transition: box-shadow 0.2s, transform 0.2s;
}
.card:hover { box-shadow: var(--shadow-hover); transform: translateY(-1px); }
.card-title {
  font-family: 'Syne', sans-serif; font-weight: 700;
  font-size: 13.5px; letter-spacing: -0.3px; margin-bottom: 3px;
}
.card-sub { font-size: 11px; color: var(--text3); margin-bottom: 14px; }

/* â”€â”€ STAT CARDS â”€â”€ */
.stat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px; }
.stat-card {
  background: white; border-radius: var(--radius);
  padding: 18px 20px; border: 1px solid var(--border);
  box-shadow: var(--shadow); position: relative; overflow: hidden;
  cursor: default; transition: box-shadow 0.2s, transform 0.2s;
}
.stat-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; }
.stat-card.blue::before { background: linear-gradient(90deg, #0071E3, #34C759); }
.stat-card.green::before { background: linear-gradient(90deg, #30D158, #32ADE6); }
.stat-card.orange::before { background: linear-gradient(90deg, #FF9F0A, #FF453A); }
.stat-card.purple::before { background: linear-gradient(90deg, #BF5AF2, #0071E3); }
.stat-card:hover { box-shadow: var(--shadow-hover); transform: translateY(-2px); }
.stat-label { font-size: 10px; letter-spacing: 1px; text-transform: uppercase; color: var(--text3); font-weight: 700; margin-bottom: 6px; }
.stat-value { font-family: 'Syne', sans-serif; font-size: 26px; font-weight: 700; letter-spacing: -1px; line-height: 1.1; }
.stat-delta { display: flex; align-items: center; gap: 4px; font-size: 11.5px; font-weight: 600; margin-top: 5px; }
.stat-delta.up { color: var(--green); }
.stat-delta.down { color: var(--red); }

/* â”€â”€ GRIDS â”€â”€ */
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin-bottom: 14px; }
.grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 14px; margin-bottom: 14px; }
.grid-3-2 { display: grid; grid-template-columns: 3fr 2fr; gap: 14px; margin-bottom: 14px; }
.grid-2-3 { display: grid; grid-template-columns: 2fr 3fr; gap: 14px; margin-bottom: 14px; }

/* â”€â”€ SIGNAL CARDS â”€â”€ */
.signal-list { display: flex; flex-direction: column; gap: 7px; }
.signal-card {
  background: var(--bg); border-radius: 11px;
  padding: 12px 14px; border: 1px solid var(--border);
  display: flex; align-items: center; gap: 12px;
  cursor: pointer; transition: all 0.14s;
}
.signal-card:hover { background: white; box-shadow: var(--shadow-hover); border-color: rgba(0,113,227,0.2); }
.signal-dot { width: 9px; height: 9px; border-radius: 50%; flex-shrink: 0; }
.signal-dot.live { background: var(--green); box-shadow: 0 0 0 3px rgba(48,209,88,0.2); }
.signal-dot.warning { background: var(--orange); box-shadow: 0 0 0 3px rgba(255,159,10,0.2); }
.signal-name { font-size: 12.5px; font-weight: 600; flex: 1; line-height: 1.3; }
.signal-cat { font-size: 9.5px; letter-spacing: 0.5px; text-transform: uppercase; color: var(--text3); }
.signal-alpha { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 14px; color: var(--green); }
.signal-buyers { font-size: 10px; color: var(--text3); }
.decay-bar { height: 4px; border-radius: 4px; background: #E5E7EB; overflow: hidden; width: 72px; }
.decay-fill { height: 100%; border-radius: 4px; }

/* â”€â”€ ALERT FEED â”€â”€ */
.alert-feed { display: flex; flex-direction: column; gap: 7px; }
.alert-item {
  display: flex; gap: 10px; align-items: flex-start;
  padding: 9px 12px; border-radius: 9px; background: var(--bg);
  border-left: 3px solid transparent; font-size: 11.5px; cursor: pointer;
  transition: background 0.14s; line-height: 1.5;
}
.alert-item:hover { background: white; }
.alert-item.sebi { border-color: var(--red); }
.alert-item.gst { border-color: var(--green); }
.alert-item.decay { border-color: var(--orange); }
.alert-item.broker { border-color: var(--blue); }
.alert-item.ai { border-color: var(--purple); }
.alert-time { font-size: 9.5px; color: var(--text3); font-weight: 700; white-space: nowrap; padding-top: 1px; }

/* â”€â”€ BUTTONS â”€â”€ */
.btn {
  border: none; outline: none; cursor: pointer; font-family: inherit;
  border-radius: 9px; font-weight: 600; transition: all 0.14s; display: inline-flex;
  align-items: center; justify-content: center; gap: 5px; white-space: nowrap;
}
.btn-primary { background: var(--blue); color: white; padding: 8px 16px; font-size: 12.5px; }
.btn-primary:hover { background: #005BBE; }
.btn-primary:active { transform: scale(0.97); }
.btn-ghost {
  background: white; color: var(--text2); padding: 7px 14px; font-size: 12.5px;
  border: 1px solid var(--border); box-shadow: var(--shadow);
}
.btn-ghost:hover { background: var(--bg); }
.btn-sm { padding: 6px 12px; font-size: 11px; border-radius: 8px; }
.btn-owned {
  background: var(--green-bg); color: #059669; border: 1px solid rgba(48,209,88,0.3);
  padding: 6px 12px; font-size: 11px; border-radius: 8px;
  cursor: default;
}

/* â”€â”€ BADGES â”€â”€ */
.badge {
  display: inline-flex; align-items: center; gap: 4px;
  font-size: 9px; font-weight: 700; padding: 2px 7px;
  border-radius: 20px; letter-spacing: 0.3px; text-transform: uppercase;
}
.badge.live { background: rgba(48,209,88,0.12); color: #059669; }
.badge.warning { background: rgba(255,159,10,0.12); color: #D97706; }
.badge.active { background: var(--blue-bg); color: var(--blue); }
.badge.pending { background: rgba(142,142,147,0.12); color: #6E6E73; }
.badge.new { background: rgba(191,90,242,0.12); color: var(--purple); }
.badge.hot { background: rgba(255,69,58,0.12); color: var(--red); }
.badge.owned { background: rgba(48,209,88,0.12); color: #059669; border: 1px solid rgba(48,209,88,0.2); }

.tag {
  display: inline-flex; align-items: center;
  font-size: 9.5px; font-weight: 600; padding: 2px 8px;
  border-radius: 6px; background: var(--bg); color: var(--text2);
  border: 1px solid var(--border);
}
.tag.blue { background: var(--blue-bg); color: var(--blue); border-color: rgba(0,113,227,0.15); }

/* â”€â”€ MODULE GRID â”€â”€ */
.module-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
.module-card {
  background: white; border-radius: 14px;
  padding: 16px; border: 1px solid var(--border);
  box-shadow: var(--shadow); cursor: pointer;
  transition: all 0.18s;
}
.module-card:hover { box-shadow: var(--shadow-hover); transform: translateY(-2px); }
.module-icon {
  width: 38px; height: 38px; border-radius: 11px;
  display: flex; align-items: center; justify-content: center;
  font-size: 18px; margin-bottom: 10px;
}
.module-name { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 13px; margin-bottom: 5px; }
.module-desc { font-size: 11.5px; color: var(--text2); line-height: 1.55; margin-bottom: 8px; }
.module-stat { display: flex; align-items: center; gap: 5px; font-size: 9.5px; font-weight: 700; letter-spacing: 0.3px; }

/* â”€â”€ PROVIDER TABLE â”€â”€ */
.data-table { width: 100%; border-collapse: collapse; }
.data-table th {
  font-size: 10px; font-weight: 700; letter-spacing: 1px;
  text-transform: uppercase; color: var(--text3);
  padding: 8px 14px; text-align: left; border-bottom: 1px solid var(--border);
}
.data-table td { padding: 12px 14px; font-size: 12.5px; border-bottom: 1px solid rgba(0,0,0,0.04); }
.data-table tr:hover td { background: rgba(0,0,0,0.015); }
.data-table .type-chip {
  font-size: 9.5px; font-weight: 600; padding: 2px 8px;
  border-radius: 5px; background: var(--bg); color: var(--text2);
}

/* â”€â”€ CHART CONTAINERS â”€â”€ */
.chart-wrap { position: relative; }

/* â”€â”€ AI COPILOT â”€â”€ */
.ai-banner {
  background: linear-gradient(135deg, #1A1A2E 0%, #16213E 50%, #0F3460 100%);
  border-radius: var(--radius);
  padding: 22px 26px;
  color: white;
  margin-bottom: 20px;
  position: relative;
  overflow: hidden;
}
.ai-banner::before {
  content: '';
  position: absolute;
  top: -50%; right: -10%;
  width: 300px; height: 300px;
  background: radial-gradient(circle, rgba(191,90,242,0.25) 0%, transparent 70%);
  pointer-events: none;
}
.ai-banner::after {
  content: '';
  position: absolute;
  bottom: -30%; left: 20%;
  width: 200px; height: 200px;
  background: radial-gradient(circle, rgba(0,113,227,0.2) 0%, transparent 70%);
  pointer-events: none;
}
.ai-tag {
  display: inline-flex; align-items: center; gap: 6px;
  background: rgba(191,90,242,0.2); border: 1px solid rgba(191,90,242,0.4);
  border-radius: 20px; padding: 4px 12px;
  font-size: 10px; font-weight: 700; color: #D8A8FF;
  letter-spacing: 1px; text-transform: uppercase; margin-bottom: 12px;
}
.ai-title { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 22px; letter-spacing: -0.8px; margin-bottom: 8px; }
.ai-sub { font-size: 13px; color: rgba(255,255,255,0.65); line-height: 1.6; max-width: 540px; }

/* â”€â”€ AI THINKING TRACE â”€â”€ */
.ai-thinking {
  display: flex; flex-direction: column; gap: 5px;
  padding: 10px 12px;
  background: rgba(0,0,0,0.03);
  border-radius: 8px;
  border-left: 2px solid rgba(0,113,227,0.3);
}
.ai-thinking-line {
  font-size: 11px; color: var(--text3); font-weight: 500;
  display: flex; align-items: center; gap: 7px;
  opacity: 0;
  transition: opacity 0.4s, color 0.4s;
}
.ai-thinking-line.visible { opacity: 1; }
.ai-thinking-line.done { color: #059669; }
.thinking-dot {
  width: 5px; height: 5px; border-radius: 50%;
  background: var(--blue); flex-shrink: 0;
  animation: thinking-blink 0.8s infinite;
}
.ai-thinking-line.done .thinking-dot { background: var(--green); animation: none; }
@keyframes thinking-blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

/* â”€â”€ MARKET RESEARCH PANEL â”€â”€ */
.research-grid { display: grid; grid-template-columns: repeat(4,1fr); gap: 12px; margin-bottom: 20px; }
.research-card {
  background: white; border-radius: var(--radius);
  padding: 18px; border: 1px solid var(--border);
  box-shadow: var(--shadow);
}
.research-value { font-family: 'Syne', sans-serif; font-size: 22px; font-weight: 800; letter-spacing: -0.8px; }
.research-label { font-size: 10px; color: var(--text3); font-weight: 700; letter-spacing: 0.8px; text-transform: uppercase; margin-top: 4px; }
.research-desc { font-size: 11px; color: var(--text2); margin-top: 6px; line-height: 1.5; }

/* â”€â”€ ROADMAP â”€â”€ */
.roadmap-item {
  display: flex; gap: 16px; padding: 16px 0;
  border-bottom: 1px solid rgba(0,0,0,0.04);
}
.roadmap-year { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 13px; color: var(--blue); min-width: 52px; }
.roadmap-content { flex: 1; }
.roadmap-title { font-weight: 700; font-size: 13px; margin-bottom: 4px; }
.roadmap-desc { font-size: 12px; color: var(--text2); line-height: 1.55; }

/* â”€â”€ DPDP COMPLIANCE â”€â”€ */
.compliance-row {
  display: flex; align-items: center; padding: 11px 0;
  border-bottom: 1px solid rgba(0,0,0,0.04); gap: 12px;
}
.compliance-check {
  width: 22px; height: 22px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 11px; flex-shrink: 0;
}
.check-pass { background: var(--green-bg); color: var(--green); }
.check-warn { background: var(--orange-bg); color: var(--orange); }
.check-fail { background: var(--red-bg); color: var(--red); }

/* â”€â”€ SCORE RING â”€â”€ */
.score-ring-wrap { display: flex; align-items: center; justify-content: center; padding: 10px 0 16px; }

/* â”€â”€ MISC â”€â”€ */
.section-hero {
  background: linear-gradient(135deg, var(--blue-bg) 0%, var(--purple-bg) 50%, var(--green-bg) 100%);
  border-radius: var(--radius);
  padding: 24px 28px;
  margin-bottom: 22px;
  border: 1px solid rgba(0,113,227,0.1);
}
.hero-title { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 24px; letter-spacing: -0.8px; margin-bottom: 6px; }
.hero-sub { font-size: 12.5px; color: var(--text2); max-width: 460px; line-height: 1.6; }
.hero-stats { display: flex; gap: 24px; margin-top: 14px; }
.hero-stat-val { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 22px; letter-spacing: -0.6px; }
.hero-stat-label { font-size: 9.5px; color: var(--text3); font-weight: 700; letter-spacing: 0.8px; text-transform: uppercase; margin-top: 2px; }

.filter-row { display: flex; gap: 7px; flex-wrap: wrap; margin-bottom: 18px; }
.filter-btn {
  border: none; outline: none; cursor: pointer; font-family: inherit;
  padding: 6px 14px; border-radius: 20px; font-size: 12px; font-weight: 600;
  transition: all 0.14s;
  background: white; color: var(--text2); border: 1px solid var(--border);
  box-shadow: var(--shadow);
}
.filter-btn:hover, .filter-btn.active { background: var(--blue); color: white; border-color: var(--blue); }

.pill {
  display: inline-flex; align-items: center;
  padding: 3px 10px; border-radius: 20px;
  font-size: 9.5px; font-weight: 700; letter-spacing: 0.3px;
}
.pill-green { background: var(--green-bg); color: #059669; }
.pill-orange { background: var(--orange-bg); color: #D97706; }
.pill-red { background: var(--red-bg); color: var(--red); }

div.divider { height: 1px; background: var(--border); margin: 16px 0; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST NOTIFICATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#toast-container {
  position: fixed;
  top: calc(var(--agent-bar-h) + 16px);
  right: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 8px;
  pointer-events: none;
}
.toast {
  background: white;
  border-radius: 14px;
  padding: 14px 18px;
  border: 1px solid var(--border);
  box-shadow: 0 12px 40px rgba(0,0,0,0.15);
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 320px;
  pointer-events: all;
  animation: toast-in 0.3s cubic-bezier(0.34,1.56,0.64,1);
  position: relative;
  overflow: hidden;
}
.toast::before {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 3px; height: 100%;
  background: var(--green);
}
.toast.success::before { background: var(--green); }
.toast.info::before { background: var(--blue); }
.toast-icon {
  width: 32px; height: 32px; border-radius: 50%;
  background: var(--green-bg);
  display: flex; align-items: center; justify-content: center;
  font-size: 14px; flex-shrink: 0;
}
.toast-title { font-weight: 700; font-size: 13px; margin-bottom: 2px; }
.toast-msg { font-size: 11.5px; color: var(--text2); }
@keyframes toast-in {
  from { opacity: 0; transform: translateX(24px) scale(0.95); }
  to { opacity: 1; transform: translateX(0) scale(1); }
}
.toast-out { animation: toast-out 0.25s ease forwards; }
@keyframes toast-out {
  to { opacity: 0; transform: translateX(24px); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PERSISTENT COPYRIGHT FOOTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#nexus-footer {
  position: fixed;
  bottom: 10px;
  right: 16px;
  z-index: 999;
  font-size: 9.5px;
  color: rgba(0,0,0,0.3);
  letter-spacing: 0.3px;
  pointer-events: none;
  font-family: 'DM Sans', sans-serif;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MARKETPLACE SIGNAL CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.mkt-signal-card {
  background: white;
  border-radius: 16px;
  padding: 20px;
  border: 1px solid rgba(0,0,0,0.07);
  box-shadow: 0 1px 4px rgba(0,0,0,0.05);
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
}
.mkt-signal-card:hover { box-shadow: 0 8px 28px rgba(0,0,0,0.12); transform: translateY(-2px); }
.mkt-signal-card.is-owned { border-color: rgba(48,209,88,0.3); background: linear-gradient(135deg, white, #F0FDF4); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BUY BUTTON STATES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.buy-btn-wrap { position: relative; }
.buy-btn-loading {
  display: flex; align-items: center; gap: 5px;
}
.spinner {
  width: 12px; height: 12px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.7s linear infinite;
  flex-shrink: 0;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Count-up animation glow */
.count-up-flash {
  animation: stat-flash 0.6s ease;
}
@keyframes stat-flash {
  0% { color: inherit; }
  40% { color: var(--green); text-shadow: 0 0 12px rgba(48,209,88,0.5); }
  100% { color: inherit; }
}
</style>
</head>
<body>

<!-- â•â•â• NEXUS AGENT CYCLE STATUS BAR â•â•â• -->
<div id="agent-bar" onclick="toggleAgentModal()">
  <div class="agent-dot"></div>
  <span class="agent-bar-text"><strong>NEXUS Agent Cycle</strong></span>
  <div class="agent-bar-divider"></div>
  <span class="agent-bar-text">Last run <strong id="agent-last-run">8 min ago</strong></span>
  <span class="agent-bar-sep">â€¢</span>
  <span class="agent-bar-text"><strong>12 signals</strong> refreshed</span>
  <span class="agent-bar-sep">â€¢</span>
  <span class="agent-bar-text"><strong style="color:#FF9F0A">2 rotation opportunities</strong> detected</span>
  <span class="agent-bar-sep">â€¢</span>
  <span class="agent-bar-text" style="color:rgba(255,255,255,0.4);font-size:9.5px">â†‘ click to view trace</span>
</div>

<!-- â•â•â• AGENT MODAL â•â•â• -->
<div id="agent-modal">
  <div id="agent-modal-close" onclick="toggleAgentModal()">âœ•</div>
  <div class="agent-modal-title">
    <div class="agent-dot" style="width:8px;height:8px"></div>
    NEXUS Agent Cycle â€” Latest Run
  </div>
  <div class="agent-trace-line done"><span class="trace-icon">âœ“</span> Initializing signal ingestion across 47 active feedsâ€¦ <em style="margin-left:auto;font-size:10px;opacity:0.6">done</em></div>
  <div class="agent-trace-line done"><span class="trace-icon">âœ“</span> Ingesting DPI layer (UPI, GST, ONDC, AA)â€¦ <em style="margin-left:auto;font-size:10px;opacity:0.6">done</em></div>
  <div class="agent-trace-line done"><span class="trace-icon">âœ“</span> Decay analysis on 214 signal-day pairsâ€¦ <em style="margin-left:auto;font-size:10px;opacity:0.6">7 decaying</em></div>
  <div class="agent-trace-line done"><span class="trace-icon">âœ“</span> Cross-referencing UPI + GST + satellite imageryâ€¦ <em style="margin-left:auto;font-size:10px;opacity:0.6">done</em></div>
  <div class="agent-trace-line warn"><span class="trace-icon">âš </span> SEBI Circular SEBI/HO/MRD/2025-01 parsed â€” 3 signals affected<em style="margin-left:auto;font-size:10px;opacity:0.6">action req.</em></div>
  <div class="agent-trace-line done"><span class="trace-icon">âœ“</span> Portfolio rotation analysis computedâ€¦ <em style="margin-left:auto;font-size:10px;opacity:0.6">2 swaps ready</em></div>
  <div class="agent-trace-line done"><span class="trace-icon">âœ“</span> AI Copilot context refreshed with latest data snapshot<em style="margin-left:auto;font-size:10px;opacity:0.6">done</em></div>
  <div class="agent-modal-footer">
    <span>Cycle completed in 4.2s &nbsp;Â·&nbsp; Next run in ~22 min</span>
    <span>Agent v2.4.1</span>
  </div>
</div>

<!-- â•â•â• TOAST CONTAINER â•â•â• -->
<div id="toast-container"></div>

<!-- â•â•â• PLATFORM â•â•â• -->
<div class="platform">

<!-- â•â•â• SIDEBAR â•â•â• -->
<div class="sidebar">
  <div class="sidebar-logo">
    <div class="logo-mark">NX</div>
    <div>
      <div class="logo-text">NEXUS</div>
      <div class="logo-sub">India Alt Data Layer</div>
    </div>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-label">Platform</div>
    <div class="nav-item active" onclick="navigate('dashboard', this)">
      <div class="nav-icon">âš¡</div><span>Command Center</span>
    </div>
    <div class="nav-item" onclick="navigate('marketplace', this)">
      <div class="nav-icon">ğŸª</div><span>Signal Marketplace</span>
    </div>
    <div class="nav-item" onclick="navigate('intelligence', this)">
      <div class="nav-icon">ğŸ‡®ğŸ‡³</div><span>India Intelligence</span>
      <span class="nav-badge green">Live</span>
    </div>
    <div class="nav-item" onclick="navigate('providers', this)">
      <div class="nav-icon">ğŸ¦</div><span>Data Providers</span>
    </div>
    <div class="nav-item" onclick="navigate('decay', this)">
      <div class="nav-icon">ğŸ“‰</div><span>Signal Health</span>
      <span class="nav-badge">2</span>
    </div>
    <div class="nav-item" onclick="navigate('modules', this)">
      <div class="nav-icon">ğŸ§©</div><span>All Modules</span>
    </div>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-label">New in 2026</div>
    <div class="nav-item" onclick="navigate('ai_copilot', this)">
      <div class="nav-icon">ğŸ¤–</div><span>AI Copilot</span>
      <span class="nav-badge blue">New</span>
    </div>
    <div class="nav-item" onclick="navigate('compliance', this)">
      <div class="nav-icon">ğŸ”</div><span>DPDP Compliance</span>
      <span class="nav-badge green">98%</span>
    </div>
    <div class="nav-item" onclick="navigate('research', this)">
      <div class="nav-icon">ğŸ“Š</div><span>Market Research</span>
    </div>
    <div class="nav-item" onclick="navigate('roadmap', this)">
      <div class="nav-icon">ğŸ—ºï¸</div><span>10-Year Roadmap</span>
    </div>
  </div>

  <div class="market-status">
    <div class="market-header">
      <div class="pulse-dot"></div>
      <div class="market-label">NSE OPEN</div>
    </div>
    <div class="market-row">NIFTY 50: <span class="up">24,210 â†‘ 1.2%</span></div>
    <div class="market-row">BANKNIFTY: <span class="down">51,840 â†“ 0.4%</span></div>
    <div class="market-row">UPI Vol Today: <span class="up">â‚¹34.2B</span></div>
  </div>

  <!-- Live portfolio widget -->
  <div class="sidebar-portfolio">
    <div class="sidebar-portfolio-label">My Portfolio</div>
    <div class="sidebar-portfolio-val" id="sb-portfolio-val">â‚¹0</div>
    <div class="sidebar-portfolio-sub" id="sb-portfolio-sub">0 signals owned</div>
  </div>

  <div class="sidebar-bottom">
    <div class="user-chip">
      <div class="avatar">AK</div>
      <div>
        <div class="user-name">Arjun Kapoor</div>
        <div class="user-role">Quant Analyst Â· Pro</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â• MAIN â•â•â• -->
<div class="main">
  <!-- TOPBAR -->
  <div class="topbar">
    <div>
      <div class="topbar-title" id="page-title">Command Center</div>
      <div class="topbar-sub" id="page-time">Loading...</div>
    </div>
    <div class="search-box">
      <span style="opacity:0.35;font-size:13px">âŒ˜</span>
      <span style="opacity:0.5;font-size:12.5px">Search signals, companies, datasets...</span>
      <div class="search-hint">âŒ˜K</div>
    </div>
    <div class="live-chip"><div class="live-dot"></div>Live Data</div>
    <div class="topbar-btn" style="position:relative"><span>ğŸ””</span><div class="notif-dot"></div></div>
    <div class="topbar-btn"><span>âš™ï¸</span></div>
  </div>

  <!-- PAGE CONTENT -->
  <div id="page-content"></div>
</div>
</div>

<!-- â•â•â• COPYRIGHT FOOTER â•â•â• -->
<div id="nexus-footer">Â© Sandip Dixit 2026 &nbsp;â€¢&nbsp; Prototype â€” Idea Stage</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NS â€” NEXUS STATE (localStorage-persisted)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const NS = {
  state: {
    boughtSignals: [],
    totalRevenue: 0,
    portfolioValue: 0
  },
  load() {
    try {
      const s = localStorage.getItem('nexus_state_v2');
      if (s) this.state = JSON.parse(s);
    } catch(e) {}
    return this;
  },
  save() {
    try { localStorage.setItem('nexus_state_v2', JSON.stringify(this.state)); } catch(e) {}
  },
  buySignal(id, price) {
    if (this.owns(id)) return false;
    this.state.boughtSignals.push(id);
    this.state.totalRevenue += price;
    this.state.portfolioValue += price * 1.142; // projected with alpha
    this.save();
    this.updateSidebarWidget();
    return true;
  },
  owns(id) { return this.state.boughtSignals.includes(id); },
  updateSidebarWidget() {
    const pv = this.state.portfolioValue;
    const el = document.getElementById('sb-portfolio-val');
    const sub = document.getElementById('sb-portfolio-sub');
    if (el) {
      const formatted = pv >= 100 ? `â‚¹${(pv/100).toFixed(1)}Cr` : `â‚¹${pv.toFixed(1)}L`;
      el.textContent = formatted;
      el.style.color = pv > 0 ? 'var(--blue)' : 'var(--text3)';
    }
    if (sub) sub.textContent = `${this.state.boughtSignals.length} signal${this.state.boughtSignals.length !== 1 ? 's' : ''} owned`;
  },
  reset() {
    this.state = { boughtSignals: [], totalRevenue: 0, portfolioValue: 0 };
    this.save();
    this.updateSidebarWidget();
  }
};
NS.load();

// â”€â”€â”€ DATA â”€â”€â”€
const gstData = [
  { month:'Aug', actual:62, expected:58 },
  { month:'Sep', actual:67, expected:65 },
  { month:'Oct', actual:71, expected:68 },
  { month:'Nov', actual:66, expected:70 },
  { month:'Dec', actual:79, expected:73 },
  { month:'Jan', actual:83, expected:78 },
];

const upiData = [
  { week:'W1', retail:4200, food:1800, travel:920, edu:340 },
  { week:'W2', retail:4600, food:2100, travel:1050, edu:390 },
  { week:'W3', retail:3900, food:1900, travel:880, edu:310 },
  { week:'W4', retail:5100, food:2400, travel:1200, edu:450 },
  { week:'W5', retail:5400, food:2200, travel:1380, edu:480 },
  { week:'W6', retail:4800, food:2000, travel:1100, edu:410 },
];

const signals = [
  { id:1,  name:'GST Revenue Surprise Index',    category:'Macro',        alpha:'+6.4%', decay:82, status:'live',    buyers:34, provider:'GSTN Analytics', price:12.5 },
  { id:2,  name:'UPI Consumer Spend Layer',       category:'Consumer',     alpha:'+4.1%', decay:71, status:'live',    buyers:28, provider:'PayFlow India',   price:8.4  },
  { id:3,  name:'Cross-Broker Retail Sentiment',  category:'Positioning',  alpha:'+3.8%', decay:65, status:'live',    buyers:19, provider:'BrokerNet',        price:6.2  },
  { id:4,  name:'SEBI Circular Impact Score',     category:'Regulatory',   alpha:'+5.2%', decay:90, status:'live',    buyers:41, provider:'RegPulse',         price:15.0 },
  { id:5,  name:'F&O Smart Money Flow',           category:'Derivatives',  alpha:'+7.1%', decay:78, status:'live',    buyers:52, provider:'NSE Quant',        price:18.5 },
  { id:6,  name:'SCORES Complaint Velocity',      category:'Governance',   alpha:'+2.9%', decay:55, status:'warning', buyers:17, provider:'SEBI Mirror',      price:4.5  },
  { id:7,  name:'Unlisted Co. Intelligence',      category:'PE/VC',        alpha:'+9.3%', decay:94, status:'live',    buyers:23, provider:'MCA Parsed',       price:22.0 },
  { id:8,  name:'India ESG Native Score',         category:'ESG',          alpha:'+1.8%', decay:41, status:'warning', buyers:11, provider:'GreenIndia',       price:3.8  },
  { id:9,  name:'AA Framework Credit Signal',     category:'Credit',       alpha:'+5.8%', decay:87, status:'live',    buyers:31, provider:'Sahamati AA',      price:14.2 },
  { id:10, name:'ONDC Merchant Flow Index',       category:'Consumer',     alpha:'+3.3%', decay:76, status:'live',    buyers:24, provider:'ONDC Analytics',   price:7.6  },
];

const alerts = [
  { time:'09:14', type:'sebi', msg:'SEBI Circular SEBI/HO/MRD/2025-01 â€” F&O lot size revision for 43 stocks. Impact: HIGH on 3 active signals.' },
  { time:'09:31', type:'gst',  msg:'GST collections Dec preliminary: â‚¹1.87L Cr (+11.2% YoY). Consumer signal upgrade triggered.' },
  { time:'10:02', type:'decay',msg:'UPI Retail Signal: Alpha decay threshold crossed (55% â†’ was 71%). Consider rotation to UPI v2 layer.' },
  { time:'10:45', type:'broker',msg:'Cross-broker net: BFSI sector positioning shifted 8% short in last 2hrs across 6 broker feeds.' },
  { time:'11:20', type:'ai',   msg:'ğŸ¤– AI Copilot: Detected earnings surprise pattern in GST+UPI correlation. HDFC Bank & Reliance flagged â€” 78% confidence.' },
];

const providers = [
  { name:'Mangal Keshav Securities', type:'Broker',       data:'Retail Flow + Sentiment',    revenue:'â‚¹24L/yr', status:'active' },
  { name:'PayFlow India',            type:'Fintech',      data:'UPI Merchant GMV',            revenue:'â‚¹41L/yr', status:'active' },
  { name:'GSTN Analytics Partner',   type:'Gov Adjacent', data:'GST Filing Signals',          revenue:'â‚¹67L/yr', status:'active' },
  { name:'NSE Quant Desk',           type:'Exchange',     data:'F&O Flow Data',               revenue:'â‚¹89L/yr', status:'active' },
  { name:'MCA Parsed Intelligence',  type:'RegTech',      data:'Unlisted Co. Filings',        revenue:'â‚¹18L/yr', status:'pending'},
  { name:'RegPulse Systems',         type:'RegTech',      data:'SEBI/RBI Circular Data',      revenue:'â‚¹32L/yr', status:'active' },
  { name:'Sahamati (AA Hub)',        type:'Gov DPI',      data:'Consented Financial Data',    revenue:'â‚¹55L/yr', status:'active' },
  { name:'ONDC Analytics',           type:'Gov Adjacent', data:'D2C Merchant GMV',            revenue:'â‚¹28L/yr', status:'active' },
];

const signalDecay = [
  { month:'M1', alpha:2.1 }, { month:'M2', alpha:3.4 }, { month:'M3', alpha:4.2 },
  { month:'M4', alpha:3.8 }, { month:'M5', alpha:2.9 }, { month:'M6', alpha:1.4 },
  { month:'M7', alpha:0.7 }, { month:'M8', alpha:0.3 },
];

// AI Mock responses
const aiMockResponses = [
  {
    thinking: [
      'â†’ Scanning 47 alt-data feeds across GSTN, UPI, SEBI, AA layersâ€¦',
      'â†’ Cross-referencing UPI consumer spend + GST surprise index + satellite imageryâ€¦',
      'â†’ Pattern match: BFSI sector divergence detected â€” rotating signal recommendation generated'
    ],
    reply: `<strong>Analysis Complete â€” BFSI Rotation Signal Detected</strong><br><br>
Based on the current UPI merchant GMV data and GST surprise index:<br><br>
â€¢ <strong>BFSI UPI spend</strong> up +18.4% vs 30-day baseline â€” consumer credit appetite rising<br>
â€¢ <strong>GST filings</strong> for NBFC segment show +11.2% surprise vs consensus<br>
â€¢ Cross-broker sentiment: 45% short on BFSI â†’ potential squeeze opportunity<br><br>
<strong>Recommendation:</strong> Rotate 18% allocation from Food sector â†’ BFSI/Pharma mix (expected +14.2% alpha over 60 days, 76% confidence).<br><br>
Signals to buy: <em>AA Framework Credit Signal</em> + <em>SEBI Circular Impact Score</em>.`
  },
  {
    thinking: [
      'â†’ Scanning 47 alt-data feedsâ€¦',
      'â†’ Running alpha decay model on active signal portfolioâ€¦',
      'â†’ Recommendation: 2 signals approaching critical threshold â€” rotation queued'
    ],
    reply: `<strong>Portfolio Decay Analysis â€” Action Required</strong><br><br>
Your signal portfolio health summary:<br><br>
â€¢ <span style="color:#30D158">âœ“ 8 signals</span> in healthy range (decay score &gt;70%)<br>
â€¢ <span style="color:#FF9F0A">âš  2 signals</span> approaching decay threshold (41-55% health)<br><br>
<strong>Flagged signals:</strong><br>
1. SCORES Complaint Velocity (55%) â†’ replace with MCA Director Network Risk Score<br>
2. India ESG Native Score v1 (41%) â†’ upgrade to ESG India v2 (Jan 2026 build)<br><br>
Both replacements have &gt;90% alpha correlation and 14-22 months of remaining lifecycle.`
  },
  {
    thinking: [
      'â†’ Scanning 47 alt-data feedsâ€¦',
      'â†’ Parsing SEBI circulars issued last 48 hours via NLP engineâ€¦',
      'â†’ Impact scoring complete â€” 3 signals require reweighting'
    ],
    reply: `<strong>SEBI Circular Digest â€” Last 48 Hours</strong><br><br>
<strong>SEBI/HO/MRD/2025-01:</strong> F&O lot size revision for 43 mid-cap stocks effective March 2026. Impact: HIGH â€” reduces retail options volume. F&O Smart Money Flow signal requires recalibration.<br><br>
<strong>SEBI/HO/MIRSD/2025-02:</strong> Enhanced KYC norms for FPIs. Minimal signal impact â€” Cross-Broker Retail Sentiment unaffected.<br><br>
<strong>RBI/2025-26/82:</strong> Liquidity framework update â€” watch BFSI credit signal (AA Framework) for lag effect over next 2 weeks.<br><br>
Overall regulatory risk score: <strong>MEDIUM</strong> for current portfolio.`
  },
  {
    thinking: [
      'â†’ Scanning 47 alt-data feedsâ€¦',
      'â†’ Building composite signal architecture: GST + UPI + ONDC inputsâ€¦',
      'â†’ Backtesting composite on NSE Nifty500 universe â€” results ready'
    ],
    reply: `<strong>GST + UPI Composite Signal â€” Build Complete</strong><br><br>
I've modeled a composite signal combining:<br>
â€¢ GST Revenue Surprise Index (weight: 45%)<br>
â€¢ UPI Consumer Spend Layer (weight: 35%)<br>
â€¢ ONDC Merchant Flow Index (weight: 20%)<br><br>
<strong>Backtest Results (Jan 2023 â€“ Jan 2026, Nifty 500):</strong><br>
â€¢ Sharpe Ratio: 1.84 (vs 0.92 baseline)<br>
â€¢ Annual Alpha: +8.7% above Nifty 500<br>
â€¢ Max Drawdown: -6.2% (vs -18.4% index)<br>
â€¢ Hit Rate: 64.3% on directional calls<br><br>
<strong>Verdict:</strong> Production-ready. Add all 3 signals to your portfolio for this composite to activate.`
  }
];

// â”€â”€â”€ CHART REGISTRY â”€â”€â”€
let charts = {};
function destroyCharts() {
  Object.values(charts).forEach(c => { try { c && c.destroy(); } catch(e){} });
  charts = {};
}

// â”€â”€â”€ NAVIGATION â”€â”€â”€
const pageTitles = {
  dashboard: 'Command Center', marketplace: 'Signal Marketplace',
  intelligence: 'India Intelligence Hub', providers: 'Data Providers',
  decay: 'Signal Health Monitor', modules: 'Platform Modules',
  ai_copilot: 'AI Copilot', compliance: 'DPDP Compliance',
  research: 'Market Research', roadmap: '10-Year Roadmap'
};

function navigate(id, el) {
  destroyCharts();
  if (document.getElementById('agent-modal').classList.contains('visible')) toggleAgentModal();
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  el.classList.add('active');
  document.getElementById('page-title').textContent = pageTitles[id] || id;
  const content = document.getElementById('page-content');
  content.innerHTML = '';
  const page = document.createElement('div');
  page.id = 'active-page';
  content.appendChild(page);
  renderPage(id, page);
}

// â”€â”€â”€ AGENT BAR â”€â”€â”€
let agentModalOpen = false;
function toggleAgentModal() {
  const m = document.getElementById('agent-modal');
  agentModalOpen = !agentModalOpen;
  m.classList.toggle('visible', agentModalOpen);
}
document.addEventListener('click', e => {
  if (agentModalOpen && !e.target.closest('#agent-bar') && !e.target.closest('#agent-modal')) {
    agentModalOpen = false;
    document.getElementById('agent-modal').classList.remove('visible');
  }
});

// Update agent bar time
let agentMinutes = 8;
setInterval(() => {
  agentMinutes++;
  const el = document.getElementById('agent-last-run');
  if (el) el.textContent = `${agentMinutes} min ago`;
  if (agentMinutes >= 30) { agentMinutes = 0; }
}, 60000);

// â”€â”€â”€ TOAST â”€â”€â”€
function showToast(title, msg, type = 'success', icon = 'âœ“') {
  const c = document.getElementById('toast-container');
  const t = document.createElement('div');
  t.className = `toast ${type}`;
  t.innerHTML = `
    <div class="toast-icon" style="${type==='success'?'background:var(--green-bg)':'background:var(--blue-bg)'}">${icon}</div>
    <div>
      <div class="toast-title">${title}</div>
      <div class="toast-msg">${msg}</div>
    </div>`;
  c.appendChild(t);
  setTimeout(() => {
    t.classList.add('toast-out');
    setTimeout(() => t.remove(), 300);
  }, 4000);
}

// â”€â”€â”€ CLOCK â”€â”€â”€
function updateClock() {
  const now = new Date();
  document.getElementById('page-time').textContent =
    now.toLocaleTimeString('en-IN', { hour:'2-digit', minute:'2-digit', second:'2-digit' }) +
    ' IST Â· Sunday, 1 Mar 2026';
}
setInterval(updateClock, 1000);
updateClock();

// â”€â”€â”€ HELPERS â”€â”€â”€
function decayColor(v) { return v > 75 ? '#30D158' : v > 50 ? '#FF9F0A' : '#FF453A'; }
function decayBar(pct) {
  return `<div class="decay-bar"><div class="decay-fill" style="width:${pct}%;background:${decayColor(pct)}"></div></div>`;
}
function fmtLakhs(v) {
  if (v >= 100) return `â‚¹${(v/100).toFixed(1)}Cr`;
  if (v > 0) return `â‚¹${v.toFixed(1)}L`;
  return 'â‚¹0';
}
function animateCount(el, endVal, prefix='â‚¹', suffix='Cr') {
  if (!el) return;
  const dur = 700, steps = 30, stepTime = dur/steps;
  let step = 0;
  const start = parseFloat(el.dataset.val || '0') || 0;
  el.dataset.val = endVal;
  const timer = setInterval(() => {
    step++;
    const val = start + (endVal - start) * (step/steps);
    el.textContent = prefix + val.toFixed(1) + suffix;
    if (step >= steps) {
      clearInterval(timer);
      el.textContent = prefix + endVal.toFixed(1) + suffix;
      el.classList.add('count-up-flash');
      setTimeout(() => el.classList.remove('count-up-flash'), 700);
    }
  }, stepTime);
}

// â”€â”€â”€ RENDER PAGES â”€â”€â”€
function renderPage(id, container) {
  switch(id) {
    case 'dashboard':    renderDashboard(container);    break;
    case 'marketplace':  renderMarketplace(container);  break;
    case 'intelligence': renderIntelligence(container); break;
    case 'providers':    renderProviders(container);    break;
    case 'decay':        renderDecay(container);        break;
    case 'modules':      renderModules(container);      break;
    case 'ai_copilot':   renderAICopilot(container);    break;
    case 'compliance':   renderCompliance(container);   break;
    case 'research':     renderResearch(container);     break;
    case 'roadmap':      renderRoadmap(container);      break;
    default: container.innerHTML = '<div class="page"><p>Page coming soon.</p></div>';
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DASHBOARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function getDashboardRevenue() {
  const base = 8.2; // Cr
  return base + (NS.state.totalRevenue / 100);
}
function getDashboardPortfolio() {
  const base = 0;
  return base + (NS.state.portfolioValue / 100);
}

function renderDashboard(c) {
  const revCr = getDashboardRevenue();
  const portCr = getDashboardPortfolio();
  const signalCount = 47 + NS.state.boughtSignals.length;

  c.innerHTML = `<div class="page">
  <!-- STAT CARDS -->
  <div class="stat-grid">
    <div class="stat-card blue">
      <div class="stat-label">Active Signals</div>
      <div class="stat-value" id="db-signals">${signalCount}</div>
      <div class="stat-delta up">â†‘ +${NS.state.boughtSignals.length + 3} this week</div>
    </div>
    <div class="stat-card green">
      <div class="stat-label">Platform Revenue</div>
      <div class="stat-value" id="db-revenue" data-val="${revCr}">â‚¹${revCr.toFixed(1)}Cr</div>
      <div class="stat-delta up">â†‘ +22% YoY</div>
    </div>
    <div class="stat-card orange">
      <div class="stat-label">Quant Buyers</div>
      <div class="stat-value">143</div>
      <div class="stat-delta up">â†‘ +19 this month</div>
    </div>
    <div class="stat-card purple">
      <div class="stat-label">Portfolio Value</div>
      <div class="stat-value" id="db-portfolio" data-val="${portCr}" style="${portCr > 0 ? 'color:var(--green)' : ''}">
        ${portCr > 0 ? 'â‚¹'+portCr.toFixed(1)+'Cr' : 'â€”'}
      </div>
      <div class="stat-delta ${portCr > 0 ? 'up' : ''}">${portCr > 0 ? 'â†‘ +14.2% projected alpha' : 'Buy signals to start'}</div>
    </div>
  </div>

  <!-- MAIN ROW -->
  <div class="grid-2-3" style="margin-bottom:14px">
    <!-- SIGNALS -->
    <div class="card">
      <div class="card-title">Active Signals</div>
      <div class="card-sub">Live alpha feed â€” sorted by strength</div>
      <div class="signal-list">
        ${signals.slice(0,6).map(s => `
        <div class="signal-card">
          <div class="signal-dot ${s.status}"></div>
          <div style="flex:1;min-width:0">
            <div class="signal-name">${s.name}</div>
            <div class="signal-cat">${s.category}${NS.owns(s.id) ? ' &nbsp;<span style="font-size:9px;color:#059669;font-weight:700">â— OWNED</span>' : ''}</div>
          </div>
          <div style="text-align:right">
            <div class="signal-alpha">${s.alpha}</div>
            <div class="signal-buyers">${s.buyers} buyers</div>
          </div>
          ${decayBar(s.decay)}
        </div>`).join('')}
      </div>
    </div>

    <!-- CHARTS -->
    <div style="display:flex;flex-direction:column;gap:14px">
      <div class="card">
        <div class="card-title">GST Revenue Surprise Index</div>
        <div class="card-sub">Actual vs Expected collections â€” leading earnings indicator</div>
        <div class="chart-wrap" style="height:160px"><canvas id="gstChart"></canvas></div>
      </div>
      <div class="card">
        <div class="card-title">UPI Consumer Spend Flow</div>
        <div class="card-sub">Weekly GMV by category (â‚¹Mn)</div>
        <div class="chart-wrap" style="height:140px"><canvas id="upiChart"></canvas></div>
      </div>
    </div>
  </div>

  <!-- ALERTS ROW -->
  <div class="grid-3-2">
    <div class="card">
      <div class="card-title">Real-Time Alert Feed</div>
      <div class="card-sub">Live regulatory, signal, and market events</div>
      <div class="alert-feed">
        ${alerts.map(a => `
        <div class="alert-item ${a.type}">
          <div class="alert-time">${a.time}</div>
          <div>${a.msg}</div>
        </div>`).join('')}
      </div>
    </div>
    <div class="card">
      <div class="card-title">Sector Positioning</div>
      <div class="card-sub">Cross-broker net long/short %</div>
      <div class="chart-wrap" style="height:220px"><canvas id="sectorChart"></canvas></div>
    </div>
  </div>
  </div>`;

  setTimeout(() => {
    const gCtx = document.getElementById('gstChart');
    if (gCtx) charts.gst = new Chart(gCtx, {
      type:'bar',
      data:{ labels:gstData.map(d=>d.month), datasets:[
        {label:'Expected',data:gstData.map(d=>d.expected),backgroundColor:'#E5E7EB',borderRadius:5},
        {label:'Actual',data:gstData.map(d=>d.actual),backgroundColor:'#0071E3',borderRadius:5},
      ]},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{grid:{display:false},ticks:{font:{size:10},color:'#AEAEB2'}},y:{grid:{color:'#F5F5F7'},ticks:{font:{size:10},color:'#AEAEB2'}}}}
    });

    const uCtx = document.getElementById('upiChart');
    if (uCtx) charts.upi = new Chart(uCtx, {
      type:'line',
      data:{ labels:upiData.map(d=>d.week), datasets:[
        {label:'Retail',data:upiData.map(d=>d.retail),borderColor:'#0071E3',backgroundColor:'rgba(0,113,227,0.08)',fill:true,tension:0.4,pointRadius:3,borderWidth:2},
        {label:'Food',data:upiData.map(d=>d.food),borderColor:'#30D158',backgroundColor:'rgba(48,209,88,0.08)',fill:true,tension:0.4,pointRadius:3,borderWidth:2},
        {label:'Travel',data:upiData.map(d=>d.travel),borderColor:'#FF9F0A',backgroundColor:'rgba(255,159,10,0.06)',fill:true,tension:0.4,pointRadius:3,borderWidth:2},
      ]},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{font:{size:10},boxWidth:10,padding:10}}},scales:{x:{grid:{display:false},ticks:{font:{size:10},color:'#AEAEB2'}},y:{grid:{color:'#F5F5F7'},ticks:{font:{size:10},color:'#AEAEB2'}}}}
    });

    const sCtx = document.getElementById('sectorChart');
    if (sCtx) charts.sector = new Chart(sCtx, {
      type:'bar',
      data:{ labels:['IT','BFSI','Pharma','FMCG','Infra','Auto'], datasets:[
        {label:'Long %',data:[68,55,72,48,81,61],backgroundColor:'rgba(48,209,88,0.75)',borderRadius:4},
        {label:'Short %',data:[32,45,28,52,19,39],backgroundColor:'rgba(255,69,58,0.75)',borderRadius:4},
      ]},
      options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{font:{size:10},boxWidth:10,padding:12}}},scales:{x:{stacked:true,grid:{color:'#F5F5F7'},ticks:{font:{size:10},color:'#AEAEB2'}},y:{stacked:true,grid:{display:false},ticks:{font:{size:10},color:'#AEAEB2'}}}}
    });
  }, 50);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MARKETPLACE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderMarketplace(c) {
  let currentFilter = 'All';
  const cats = ['All','Macro','Consumer','Derivatives','Regulatory','ESG','PE/VC','Positioning','Credit'];

  function buildHTML(filter) {
    const filtered = filter === 'All' ? signals : signals.filter(s => s.category === filter);
    return `<div class="page">
    <div class="section-hero">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:20px">
        <div>
          <div class="hero-title">Signal Marketplace</div>
          <div class="hero-sub">India's first regulated alt-data exchange. Buy alpha signals or monetize your data. Every dataset is tickerized, compliance-verified, and decay-monitored.</div>
        </div>
        <div class="hero-stats">
          <div><div class="hero-stat-val" style="color:#0071E3">47</div><div class="hero-stat-label">Live Signals</div></div>
          <div style="width:1px;background:rgba(0,0,0,0.08)"></div>
          <div><div class="hero-stat-val" style="color:#30D158">â‚¹${getDashboardRevenue().toFixed(1)}Cr</div><div class="hero-stat-label">Revenue Paid</div></div>
          <div style="width:1px;background:rgba(0,0,0,0.08)"></div>
          <div><div class="hero-stat-val" style="color:#BF5AF2">143</div><div class="hero-stat-label">Quant Buyers</div></div>
        </div>
      </div>
    </div>

    <div class="filter-row" id="filters">
      ${cats.map(cat => `<button class="filter-btn ${cat===filter?'active':''}" onclick="filterSignals('${cat}')">${cat}</button>`).join('')}
    </div>

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
      ${filtered.map(s => {
        const owned = NS.owns(s.id);
        return `
      <div class="mkt-signal-card ${owned ? 'is-owned' : ''}" id="signal-card-${s.id}">
        ${owned ? '<div style="position:absolute;top:14px;right:14px"><span class="badge owned">âœ“ Owned</span></div>' : ''}
        <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px">
          <div>
            <span class="badge ${s.status}" style="margin-bottom:7px;display:inline-flex">â— ${s.status.toUpperCase()}</span>
            <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:14px;letter-spacing:-0.3px;${owned?'color:#059669':''}">${s.name}</div>
          </div>
          <div style="text-align:right;${owned?'margin-right:60px':''}">
            <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:19px;color:#30D158">${s.alpha}</div>
            <div style="font-size:9.5px;color:#AEAEB2">avg alpha</div>
          </div>
        </div>
        <div style="display:flex;gap:6px;margin-bottom:12px">
          <span class="tag blue">${s.category}</span>
          <span class="tag">${s.provider}</span>
        </div>
        <div style="display:flex;gap:0;align-items:center">
          <div style="flex:1">
            <div style="font-size:9.5px;color:#AEAEB2;margin-bottom:5px;text-transform:uppercase;letter-spacing:1px;font-weight:700">Signal Health</div>
            <div style="display:flex;align-items:center;gap:8px">
              <div style="flex:1;height:5px;background:#F0F0F0;border-radius:4px;overflow:hidden">
                <div style="height:100%;width:${s.decay}%;background:${decayColor(s.decay)};border-radius:4px"></div>
              </div>
              <span style="font-size:11px;font-weight:700;color:${decayColor(s.decay)}">${s.decay}%</span>
            </div>
          </div>
          <div style="width:1px;background:rgba(0,0,0,0.06);margin:0 14px"></div>
          <div>
            <div style="font-size:9.5px;color:#AEAEB2;margin-bottom:4px;text-transform:uppercase;letter-spacing:1px;font-weight:700">Buyers</div>
            <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:18px">${s.buyers}</div>
          </div>
        </div>
        <div style="margin-top:12px;padding-top:12px;border-top:1px solid rgba(0,0,0,0.06);display:flex;align-items:center;gap:7px">
          <div style="flex:1">
            <div style="font-size:11px;font-weight:700;color:var(--text)">â‚¹${s.price}L <span style="font-weight:400;color:var(--text3)">/ year</span></div>
            <div style="font-size:9.5px;color:var(--text3)">Annual subscription</div>
          </div>
          ${owned
            ? `<button class="btn-owned" disabled>âœ“ Signal Owned</button>`
            : `<button class="btn btn-primary btn-sm" id="buy-btn-${s.id}" onclick="buySignal(${s.id}, ${s.price}, this)">Buy Signal</button>`
          }
          <button class="btn btn-ghost btn-sm">Preview</button>
        </div>
      </div>`;
      }).join('')}
    </div>
    </div>`;
  }

  window.filterSignals = function(f) {
    currentFilter = f;
    document.getElementById('page-content').querySelector('#active-page').innerHTML = buildHTML(f);
  };

  c.innerHTML = buildHTML(currentFilter);
}

// â”€â”€ BUY SIGNAL HANDLER â”€â”€
window.buySignal = function(id, price, btn) {
  if (!btn || btn.disabled) return;
  btn.disabled = true;
  btn.innerHTML = '<span class="spinner"></span> Acquiringâ€¦';
  btn.style.background = '#636366';

  setTimeout(() => {
    const success = NS.buySignal(id, price);
    if (success) {
      // Update button to owned state
      const wrap = document.getElementById(`signal-card-${id}`);
      if (wrap) {
        wrap.classList.add('is-owned');
        // Add owned badge
        if (!wrap.querySelector('.badge.owned')) {
          const badge = document.createElement('div');
          badge.style.cssText = 'position:absolute;top:14px;right:14px';
          badge.innerHTML = '<span class="badge owned">âœ“ Owned</span>';
          wrap.appendChild(badge);
        }
        // Replace button
        btn.outerHTML = `<button class="btn-owned" disabled>âœ“ Signal Owned</button>`;
        // Name highlight
        const nameEl = wrap.querySelector('[style*="Syne"]');
        if (nameEl) nameEl.style.color = '#059669';
      }

      // Update marketplace revenue stat
      const revEl = document.querySelector('.hero-stat-val');
      if (revEl) revEl.textContent = `â‚¹${getDashboardRevenue().toFixed(1)}Cr`;

      NS.updateSidebarWidget();
      showToast('Signal Acquired âœ“', `${signals.find(s=>s.id===id)?.name} â€” added to your portfolio. Expected alpha: +14.2%`, 'success', 'ğŸ“Š');
    }
  }, 1500);
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INTELLIGENCE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderIntelligence(c) {
  let activeModule = 'gst';
  const modules = [
    { id:'gst',     icon:'ğŸ“Š', label:'GST Index',       color:'#0071E3', bg:'#EBF3FD' },
    { id:'upi',     icon:'ğŸ’³', label:'UPI Flow',         color:'#30D158', bg:'#EDFAF2' },
    { id:'sebi',    icon:'âš–ï¸', label:'SEBI Circulars',   color:'#FF453A', bg:'#FFF1F0' },
    { id:'options', icon:'ğŸ“ˆ', label:'F&O Intelligence', color:'#BF5AF2', bg:'#F5F0FE' },
    { id:'aa',      icon:'ğŸ”—', label:'AA Framework',     color:'#32ADE6', bg:'#EBF7FD' },
    { id:'ondc',    icon:'ğŸ›ï¸', label:'ONDC Signals',     color:'#FF9F0A', bg:'#FFF8EC' },
  ];

  function buildModule(mid) {
    if (mid === 'gst') return `
      <div class="grid-2" style="margin-bottom:0">
        <div class="card">
          <div class="card-title">GST Revenue Surprise Index</div>
          <div class="card-sub">Monthly actual vs consensus â€” NSE-mapped earnings predictor</div>
          <div class="chart-wrap" style="height:200px"><canvas id="intGSTChart"></canvas></div>
        </div>
        <div class="card">
          <div class="card-title">Surprise Score by State</div>
          <div class="card-sub">State-level GST divergence from national average</div>
          ${[{state:'Maharashtra',score:8.2,dir:'up'},{state:'Gujarat',score:6.4,dir:'up'},{state:'Karnataka',score:4.1,dir:'up'},{state:'Tamil Nadu',score:2.8,dir:'up'},{state:'Rajasthan',score:-1.4,dir:'down'},{state:'West Bengal',score:-3.2,dir:'down'},{state:'Uttar Pradesh',score:-4.7,dir:'down'}].map(s=>`
          <div style="display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid rgba(0,0,0,0.04)">
            <span style="flex:1;font-size:12.5px;font-weight:500">${s.state}</span>
            <div style="width:110px;height:5px;background:#F0F0F0;border-radius:4px;overflow:hidden">
              <div style="height:100%;width:${Math.abs(s.score)*7}%;background:${s.dir==='up'?'#30D158':'#FF453A'};border-radius:4px"></div>
            </div>
            <span style="font-family:'Syne',sans-serif;font-weight:700;font-size:12px;color:${s.dir==='up'?'#30D158':'#FF453A'};width:42px;text-align:right">${s.dir==='up'?'+':''}${s.score}%</span>
          </div>`).join('')}
        </div>
      </div>`;

    if (mid === 'upi') return `
      <div class="grid-2" style="margin-bottom:0">
        <div class="card">
          <div class="card-title">UPI Consumer Spend Sectors</div>
          <div class="card-sub">Weekly GMV flow by merchant category (â‚¹Mn)</div>
          <div class="chart-wrap" style="height:220px"><canvas id="intUPIChart"></canvas></div>
        </div>
        <div class="card">
          <div class="card-title">Sector Signal Strength</div>
          <div class="card-sub">Current week vs 4-week baseline</div>
          ${[{name:'Retail & E-Commerce',change:12.4,signal:'BUY'},{name:'Food Delivery',change:8.1,signal:'BUY'},{name:'Travel & Hospitality',change:25.3,signal:'STRONG BUY'},{name:'Education',change:4.2,signal:'NEUTRAL'},{name:'Healthcare',change:-2.1,signal:'WATCH'},{name:'Luxury Goods',change:18.7,signal:'BUY'}].map(s=>`
          <div style="display:flex;align-items:center;padding:9px 0;border-bottom:1px solid rgba(0,0,0,0.04);gap:8px">
            <span style="flex:1;font-size:12.5px;font-weight:500">${s.name}</span>
            <span style="font-family:'Syne',sans-serif;font-weight:700;font-size:12px;color:${s.change>0?'#30D158':'#FF453A'}">${s.change>0?'+':''}${s.change}%</span>
            <span class="badge ${s.signal.includes('BUY')?'live':s.signal==='WATCH'?'warning':''}" style="font-size:8.5px">${s.signal}</span>
          </div>`).join('')}
        </div>
      </div>`;

    if (mid === 'aa') return `
      <div class="grid-2" style="margin-bottom:0">
        <div class="card">
          <div class="card-title">Account Aggregator Credit Signal</div>
          <div class="card-sub">Consented financial data via Sahamati AA Hub â€” credit intelligence layer</div>
          <div style="background:linear-gradient(135deg,#EBF7FD,#EDF9F0);border-radius:12px;padding:16px;margin-top:4px;border:1px solid rgba(50,173,230,0.2)">
            <div style="font-size:11px;color:#0E7490;font-weight:700;margin-bottom:10px;text-transform:uppercase;letter-spacing:0.8px">Why Account Aggregator?</div>
            <p style="font-size:12px;color:#1A1A1A;line-height:1.6">India's AA framework (DEPA standard) enables consented, real-time sharing of bank statements, insurance, mutual fund, and GST data. This creates a first-of-its-kind compliant alternative credit signal â€” unavailable in any other market globally.</p>
          </div>
          <div style="margin-top:14px;display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px">
            ${[{v:'â‚¹2.1Tr',l:'Data Consents',c:'#32ADE6'},{v:'81M',l:'Active Consents',c:'#30D158'},{v:'47',l:'FIP Partners',c:'#BF5AF2'}].map(m=>`
            <div style="background:white;border-radius:10px;padding:12px;text-align:center;border:1px solid rgba(0,0,0,0.06)">
              <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:18px;color:${m.c}">${m.v}</div>
              <div style="font-size:9.5px;color:#AEAEB2;font-weight:700;text-transform:uppercase;letter-spacing:0.6px;margin-top:3px">${m.l}</div>
            </div>`).join('')}
          </div>
        </div>
        <div class="card">
          <div class="card-title">AA Signal Coverage</div>
          <div class="card-sub">Data types available via consent from AA partners</div>
          ${[{label:'Bank Statement Flow',coverage:94,badge:'live'},{label:'GST Filing Proxy',coverage:78,badge:'live'},{label:'Insurance Premium Proxy',coverage:65,badge:'live'},{label:'Mutual Fund SIP Signal',coverage:82,badge:'live'},{label:'EPFO Employment Signal',coverage:71,badge:'warning'},{label:'Real Estate Registry',coverage:38,badge:'warning'}].map(s=>`
          <div style="display:flex;align-items:center;gap:10px;padding:9px 0;border-bottom:1px solid rgba(0,0,0,0.04)">
            <div style="flex:1"><div style="font-size:12.5px;font-weight:500">${s.label}</div></div>
            <div style="width:80px;height:5px;background:#F0F0F0;border-radius:4px;overflow:hidden">
              <div style="height:100%;width:${s.coverage}%;background:${decayColor(s.coverage)};border-radius:4px"></div>
            </div>
            <span style="font-size:11px;font-weight:700;color:${decayColor(s.coverage)};width:30px;text-align:right">${s.coverage}%</span>
            <span class="badge ${s.badge}">${s.badge}</span>
          </div>`).join('')}
        </div>
      </div>`;

    if (mid === 'ondc') return `
      <div class="grid-2" style="margin-bottom:0">
        <div class="card">
          <div class="card-title">ONDC Merchant Flow Index</div>
          <div class="card-sub">Open Network for Digital Commerce â€” real-time D2C GMV signals</div>
          <div style="background:linear-gradient(135deg,#FFF8EC,#FFFBF0);border-radius:12px;padding:16px;margin-top:4px;border:1px solid rgba(255,159,10,0.2)">
            <div style="font-size:11px;color:#D97706;font-weight:700;margin-bottom:10px;text-transform:uppercase;letter-spacing:0.8px">ONDC Opportunity</div>
            <p style="font-size:12px;color:#1A1A1A;line-height:1.6">ONDC processed 15M+ transactions/month by Dec 2025. As India's open commerce network scales, seller-level GMV, category trends, and supply chain signals become powerful investment intelligence unavailable on single-platform datasets.</p>
          </div>
          <div style="margin-top:14px;display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px">
            ${[{v:'15M+',l:'Tx/Month',c:'#FF9F0A'},{v:'7.2L',l:'Active Sellers',c:'#30D158'},{v:'143',l:'Buyer Apps',c:'#0071E3'}].map(m=>`
            <div style="background:white;border-radius:10px;padding:12px;text-align:center;border:1px solid rgba(0,0,0,0.06)">
              <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:18px;color:${m.c}">${m.v}</div>
              <div style="font-size:9.5px;color:#AEAEB2;font-weight:700;text-transform:uppercase;letter-spacing:0.6px;margin-top:3px">${m.l}</div>
            </div>`).join('')}
          </div>
        </div>
        <div class="card">
          <div class="card-title">ONDC Category Signals</div>
          <div class="card-sub">GMV shift vs 30-day baseline by network category</div>
          ${[{cat:'Grocery & Staples',change:+18.4,signal:'STRONG BUY'},{cat:'Electronics',change:+9.2,signal:'BUY'},{cat:'Fashion & Apparel',change:+14.6,signal:'BUY'},{cat:'Mobility / Rides',change:+7.1,signal:'BUY'},{cat:'Home & Kitchen',change:-3.8,signal:'WATCH'},{cat:'Pharma (OTC)',change:+22.1,signal:'STRONG BUY'}].map(s=>`
          <div style="display:flex;align-items:center;padding:9px 0;border-bottom:1px solid rgba(0,0,0,0.04);gap:8px">
            <span style="flex:1;font-size:12.5px;font-weight:500">${s.cat}</span>
            <span style="font-family:'Syne',sans-serif;font-weight:700;font-size:12px;color:${s.change>0?'#30D158':'#FF453A'}">${s.change>0?'+':''}${s.change}%</span>
            <span class="badge ${s.signal.includes('BUY')?'live':s.signal==='WATCH'?'warning':''}" style="font-size:8.5px">${s.signal}</span>
          </div>`).join('')}
        </div>
      </div>`;

    return `<div class="card"><div class="card-title">${mid.toUpperCase()} Module</div><div class="card-sub">Loading intelligence dataâ€¦</div></div>`;
  }

  c.innerHTML = `<div class="page">
    <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:24px;letter-spacing:-0.8px;margin-bottom:5px">India Intelligence Hub</div>
    <div style="font-size:12.5px;color:#636366;margin-bottom:20px">Native Indian data signals â€” GST, UPI, SEBI, F&O, AA, ONDC â€” all tickerized and live</div>

    <div style="display:flex;gap:9px;margin-bottom:22px;flex-wrap:wrap" id="int-tabs">
      ${modules.map(m => `
      <div onclick="switchIntModule('${m.id}')"
        style="display:flex;align-items:center;gap:7px;padding:9px 16px;border-radius:11px;cursor:pointer;background:${activeModule===m.id?m.bg:'white'};border:1.5px solid ${activeModule===m.id?m.color+'40':'rgba(0,0,0,0.07)'};font-weight:600;font-size:12.5px;color:${activeModule===m.id?m.color:'#636366'};transition:all 0.14s;box-shadow:0 1px 4px rgba(0,0,0,0.04)">
        <span>${m.icon}</span>${m.label}
        ${m.id==='aa'||m.id==='ondc'?'<span class="badge new" style="font-size:8px">New</span>':''}
      </div>`).join('')}
    </div>

    <div id="int-module">${buildModule(activeModule)}</div>
  </div>`;

  window.switchIntModule = function(mid) {
    activeModule = mid;
    document.getElementById('int-module').innerHTML = buildModule(mid);
    document.querySelectorAll('#int-tabs > div').forEach((el, i) => {
      const m = modules[i];
      const isActive = m.id === mid;
      el.style.background = isActive ? m.bg : 'white';
      el.style.borderColor = isActive ? m.color+'40' : 'rgba(0,0,0,0.07)';
      el.style.color = isActive ? m.color : '#636366';
    });
    if (mid === 'gst') setTimeout(() => {
      charts.intGST = new Chart(document.getElementById('intGSTChart'), {
        type:'line',
        data:{labels:gstData.map(d=>d.month),datasets:[
          {label:'Actual',data:gstData.map(d=>d.actual),borderColor:'#0071E3',backgroundColor:'rgba(0,113,227,0.1)',fill:true,tension:0.4,borderWidth:2.5,pointRadius:4},
          {label:'Expected',data:gstData.map(d=>d.expected),borderColor:'#AEAEB2',borderDash:[5,5],fill:false,tension:0.4,borderWidth:2,pointRadius:0},
        ]},
        options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{font:{size:10},boxWidth:10}}},scales:{x:{grid:{display:false},ticks:{font:{size:10},color:'#AEAEB2'}},y:{grid:{color:'#F5F5F7'},ticks:{font:{size:10},color:'#AEAEB2'}}}}
      });
    }, 30);
    if (mid === 'upi') setTimeout(() => {
      charts.intUPI = new Chart(document.getElementById('intUPIChart'), {
        type:'line',
        data:{labels:upiData.map(d=>d.week),datasets:[
          {label:'Retail',data:upiData.map(d=>d.retail),borderColor:'#0071E3',backgroundColor:'rgba(0,113,227,0.08)',fill:true,tension:0.4,borderWidth:2,pointRadius:3},
          {label:'Food',data:upiData.map(d=>d.food),borderColor:'#30D158',backgroundColor:'rgba(48,209,88,0.06)',fill:true,tension:0.4,borderWidth:2,pointRadius:3},
          {label:'Travel',data:upiData.map(d=>d.travel),borderColor:'#FF9F0A',backgroundColor:'rgba(255,159,10,0.05)',fill:true,tension:0.4,borderWidth:2,pointRadius:3},
          {label:'Education',data:upiData.map(d=>d.edu),borderColor:'#BF5AF2',backgroundColor:'rgba(191,90,242,0.05)',fill:true,tension:0.4,borderWidth:2,pointRadius:3},
        ]},
        options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{font:{size:10},boxWidth:10,padding:10}}},scales:{x:{grid:{display:false},ticks:{font:{size:10},color:'#AEAEB2'}},y:{grid:{color:'#F5F5F7'},ticks:{font:{size:10},color:'#AEAEB2'}}}}
      });
    }, 30);
  };

  setTimeout(() => switchIntModule('gst'), 30);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PROVIDERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderProviders(c) {
  c.innerHTML = `<div class="page">
    <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:24px;letter-spacing:-0.8px;margin-bottom:5px">Data Providers</div>
    <div style="font-size:12.5px;color:#636366;margin-bottom:22px">Verified data partners â€” revenue-share model, compliance-vetted, signal-mapped</div>
    <div class="card" style="margin-bottom:14px;padding:0">
      <table class="data-table">
        <thead><tr><th>Provider</th><th>Type</th><th>Data Source</th><th>Annual Revenue</th><th>Status</th><th></th></tr></thead>
        <tbody>
          ${providers.map(p=>`
          <tr>
            <td><span style="font-weight:600;font-size:13px">${p.name}</span></td>
            <td><span class="type-chip">${p.type}</span></td>
            <td style="color:#636366">${p.data}</td>
            <td><span style="font-family:'Syne',sans-serif;font-weight:700">${p.revenue}</span></td>
            <td><span class="badge ${p.status}">${p.status}</span></td>
            <td><button class="btn btn-ghost btn-sm">View</button></td>
          </tr>`).join('')}
        </tbody>
      </table>
    </div>
    <div class="grid-3">
      ${[{icon:'ğŸ¦',label:'Broker Network',value:'8 brokers',desc:'Retail flow + sentiment aggregated across 8 partner brokers',color:'#0071E3'},{icon:'ğŸ’¹',label:'Total Data GMV',value:'â‚¹11.4Cr',desc:'Annual data revenue distributed to providers via rev-share model',color:'#30D158'},{icon:'ğŸ”',label:'DPDP Score',value:'98/100',desc:'All datasets DPDP, PDPB, SEBI Reg FD compliant â€” verified quarterly',color:'#BF5AF2'}].map(m=>`
      <div class="card" style="text-align:center">
        <div style="font-size:30px;margin-bottom:10px">${m.icon}</div>
        <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:24px;color:${m.color};letter-spacing:-0.8px">${m.value}</div>
        <div style="font-weight:700;font-size:13.5px;margin-top:4px;margin-bottom:7px">${m.label}</div>
        <div style="font-size:11.5px;color:#636366;line-height:1.6">${m.desc}</div>
      </div>`).join('')}
    </div>
  </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SIGNAL HEALTH / DECAY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderDecay(c) {
  c.innerHTML = `<div class="page">
    <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:24px;letter-spacing:-0.8px;margin-bottom:5px">Signal Health Monitor</div>
    <div style="font-size:12.5px;color:#636366;margin-bottom:20px">Real-time alpha decay tracking â€” know before your signal dies. Rotation recommendations powered by AI.</div>

    <div style="background:linear-gradient(135deg,#FFF8EC,#FFFBEB);border-radius:14px;padding:16px 20px;margin-bottom:18px;border:1px solid rgba(255,159,10,0.3);display:flex;align-items:center;gap:14px">
      <div style="font-size:22px">âš ï¸</div>
      <div style="flex:1">
        <div style="font-weight:700;font-size:13.5px;color:#D97706">2 Signals Approaching Decay Threshold</div>
        <div style="font-size:11.5px;color:#92400E;margin-top:2px">SCORES Complaint Velocity (55% health) and India ESG Native Score (41% health) need attention. AI rotation recommendations queued.</div>
      </div>
      <button class="btn btn-sm" style="background:#FF9F0A;color:white;border:none" onclick="navigate('ai_copilot',document.querySelector('[onclick*=ai_copilot]'))">View Recommendations</button>
    </div>

    <div class="grid-3-2">
      <div class="card">
        <div class="card-title">Alpha Decay Timeline</div>
        <div class="card-sub">GST Revenue Surprise Index â€” 8 month trajectory</div>
        <div class="chart-wrap" style="height:190px"><canvas id="decayChart"></canvas></div>
        <div style="display:flex;gap:7px;margin-top:12px">
          ${[['Phase 1 (Discovery)','#30D158'],['Phase 2 (Maturity)','#FF9F0A'],['Phase 3 (Saturation)','#FF453A']].map(([l,col])=>`
          <div style="flex:1;padding:7px;background:${col}11;border-radius:8px;border:1px solid ${col}33;font-size:9.5px;font-weight:700;color:${col};text-align:center">${l}</div>`).join('')}
        </div>
      </div>
      <div class="card">
        <div class="card-title">Portfolio Health</div>
        <div class="card-sub">All active signal health scores</div>
        ${signals.map(s=>`
        <div style="display:flex;align-items:center;gap:9px;padding:6px 0">
          <div style="flex:1;min-width:0">
            <div style="font-size:11.5px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px">${s.name}</div>
          </div>
          <div style="display:flex;align-items:center;gap:6px;width:110px">
            <div style="flex:1;height:4px;background:#F0F0F0;border-radius:4px;overflow:hidden">
              <div style="height:100%;width:${s.decay}%;background:${decayColor(s.decay)};border-radius:4px"></div>
            </div>
            <span style="font-size:10.5px;font-weight:700;color:${decayColor(s.decay)};width:28px;text-align:right">${s.decay}%</span>
          </div>
          ${NS.owns(s.id) ? '<span style="font-size:8.5px;color:#059669;font-weight:700">â—</span>' : ''}
        </div>`).join('')}
      </div>
    </div>

    <div class="card">
      <div class="card-title">AI Rotation Recommendations</div>
      <div class="card-sub">Suggested substitutions based on alpha correlation and decay trajectories â€” powered by Nexus AI</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:6px">
        ${[
          {from:'SCORES Complaint Velocity',to:'MCA Director Network Risk Score',reason:'95% alpha correlation, MCA signal is 14 months younger with stronger governance signal',urgency:'High'},
          {from:'India ESG Native Score (v1)',to:'ESG India Score v2 (Jan 2026)',reason:'v2 includes new SEBI BRSR data layer â€” 22% more predictive on governance factors',urgency:'Medium'}
        ].map(r=>`
        <div style="background:rgba(0,0,0,0.02);border-radius:12px;padding:15px;border:1px solid rgba(0,0,0,0.07)">
          <div style="font-size:9.5px;color:#AEAEB2;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:7px">Rotate Away From</div>
          <div style="font-weight:700;font-size:13px;color:#FF453A;margin-bottom:9px">â†— ${r.from}</div>
          <div style="font-size:9.5px;color:#AEAEB2;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:7px">Recommended Replacement</div>
          <div style="font-weight:700;font-size:13px;color:#30D158;margin-bottom:9px">âœ“ ${r.to}</div>
          <div style="font-size:11.5px;color:#636366;line-height:1.5;margin-bottom:11px">${r.reason}</div>
          <div style="display:flex;gap:7px;align-items:center">
            <span class="badge ${r.urgency==='High'?'warning':''}">${r.urgency} urgency</span>
            <button class="btn btn-primary btn-sm" style="margin-left:auto">Switch Signal</button>
          </div>
        </div>`).join('')}
      </div>
    </div>
  </div>`;

  setTimeout(() => {
    charts.decay = new Chart(document.getElementById('decayChart'), {
      type:'line',
      data:{
        labels:signalDecay.map(d=>d.month),
        datasets:[{label:'Alpha %',data:signalDecay.map(d=>d.alpha),borderColor:'#0071E3',backgroundColor:'rgba(0,113,227,0.07)',fill:true,tension:0.4,borderWidth:3,pointRadius:5,pointBackgroundColor:'#0071E3',pointBorderColor:'white',pointBorderWidth:2}]
      },
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{grid:{display:false},ticks:{font:{size:10},color:'#AEAEB2'}},y:{grid:{color:'#F5F5F7'},ticks:{font:{size:10},color:'#AEAEB2'}}}}
    });
  }, 50);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MODULES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderModules(c) {
  const mods = [
    {icon:'ğŸ“‹',bg:'#EBF3FD',color:'#0071E3',name:'SEBI Circular Engine',desc:'Real-time SEBI/RBI circular NLP â€” impact scored, signal-mapped, backtested P&L before you even read it.',stat:'41 subscribers Â· 97% alert accuracy'},
    {icon:'ğŸ§¾',bg:'#EDFAF2',color:'#059669',name:'GST Signal Intelligence',desc:'Monthly GST filings mapped to NSE-listed company revenue â€” 30-45 day earnings surprise predictor.',stat:'34 subscribers Â· â‚¹2.1Cr alpha generated'},
    {icon:'ğŸ’³',bg:'#F0FDF4',color:'#16A34A',name:'UPI Flow Intelligence',desc:'Merchant category GMV aggregated from payment partners â€” sector-level consumer spend index.',stat:'28 subscribers Â· 6 sector indices'},
    {icon:'ğŸ¦',bg:'#F5F3FF',color:'#7C3AED',name:'Cross-Broker Sentiment',desc:'Federated retail positioning data from 8 brokers â€” aggregate signal no single broker can build alone.',stat:'19 subscribers Â· 8 broker feeds'},
    {icon:'ğŸ”',bg:'#FFF7ED',color:'#D97706',name:'SCORES Grievance Signal',desc:'SEBI public complaint velocity â†’ governance/fraud early-warning, 60 days ahead of regulatory action.',stat:'17 subscribers Â· 100% public data'},
    {icon:'ğŸ“ˆ',bg:'#FFF1F2',color:'#BE123C',name:'F&O Smart Money Flow',desc:'NSE options real-time lot-size classification â€” institutional vs retail divergence + unusual OI alerts.',stat:'52 subscribers Â· â‚¹3.4Cr alpha generated'},
    {icon:'ğŸ›ï¸',bg:'#ECFEFF',color:'#0E7490',name:'Unlisted Company Intel',desc:'MCA21 + ROC AI parsing â†’ director networks, revenue proxies, compliance scoring for 250K+ unlisted firms.',stat:'23 subscribers Â· PE/VC focused'},
    {icon:'ğŸ—³ï¸',bg:'#FDF4FF',color:'#A21CAF',name:'Political Event Scorer',desc:'State election calendar + NLP policy monitoring â†’ sector-level P&L backtested against 20yr event history.',stat:'31 subscribers Â· 22 event types'},
    {icon:'ğŸŒ¿',bg:'#F0FDF4',color:'#15803D',name:'ESG India Native v2',desc:'India-specific ESG scoring using BRSR, Glassdoor equivalent, satellite, and court records. Not MSCI. Now v2.',stat:'11 subscribers Â· SEBI mandate ready'},
    {icon:'ğŸ“‰',bg:'#FFFBEB',color:'#B45309',name:'Signal Decay Monitor',desc:'Continuous alpha decay tracking across all datasets â€” AI rotation alerts before your signal dies silently.',stat:'All subscribers Â· Retention engine'},
    {icon:'ğŸ”—',bg:'#EBF7FD',color:'#0E7490',name:'AA Framework Signal',desc:'Consented financial data via Sahamati Account Aggregator â€” bank, insurance, MF, GST data combined.',stat:'31 subscribers Â· DEPA compliant'},
    {icon:'ğŸ›ï¸',bg:'#FFF8EC',color:'#D97706',name:'ONDC Merchant Flow',desc:'Open Network for Digital Commerce GMV intelligence â€” real D2C supply chain visibility at category level.',stat:'24 subscribers Â· 15M tx/month'},
  ];

  c.innerHTML = `<div class="page">
    <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:24px;letter-spacing:-0.8px;margin-bottom:5px">Platform Modules</div>
    <div style="font-size:12.5px;color:#636366;margin-bottom:22px">12 proprietary India-native intelligence modules. Each one a standalone moat.</div>
    <div class="module-grid">
      ${mods.map(m=>`
      <div class="module-card">
        <div class="module-icon" style="background:${m.bg};color:${m.color}">${m.icon}</div>
        <div class="module-name">${m.name}</div>
        <div class="module-desc">${m.desc}</div>
        <div class="module-stat" style="color:${m.color}"><span>â—</span><span>${m.stat}</span></div>
      </div>`).join('')}
    </div>
  </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  AI COPILOT (demo-ready, no real API)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let aiMockIdx = 0;

function renderAICopilot(c) {
  c.innerHTML = `<div class="page">
    <div class="ai-banner">
      <div class="ai-tag">âœ¦ NEXUS AI Engine</div>
      <div class="ai-title">NEXUS AI Copilot</div>
      <div class="ai-sub">Your intelligent quant co-analyst. Ask anything about signals, correlations, market conditions, or get instant alpha strategies built from India's unique data stack.</div>
      <div style="display:flex;gap:10px;margin-top:18px;flex-wrap:wrap">
        ${[
          'ğŸ“Š Analyze my signal portfolio decay',
          'ğŸ” Find earnings surprises for BFSI next 30 days',
          'âš¡ Build a GST + UPI composite signal',
          'ğŸ“‹ Summarize today\'s SEBI circulars'
        ].map((s,i)=>`<div onclick="setPrompt(${i})" style="background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);border-radius:8px;padding:8px 14px;font-size:11.5px;cursor:pointer;transition:background 0.14s;color:rgba(255,255,255,0.85)"
          onmouseenter="this.style.background='rgba(255,255,255,0.15)'"
          onmouseleave="this.style.background='rgba(255,255,255,0.08)'">${s}</div>`).join('')}
      </div>
    </div>

    <!-- Chat UI -->
    <div class="card" style="margin-bottom:14px">
      <div id="chat-history" style="min-height:260px;max-height:400px;overflow-y:auto;display:flex;flex-direction:column;gap:12px;padding:4px 0">
        <div style="display:flex;gap:10px">
          <div style="width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,#0071E3,#BF5AF2);display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0">ğŸ¤–</div>
          <div style="background:var(--bg);border-radius:0 12px 12px 12px;padding:12px 14px;max-width:80%;font-size:12.5px;line-height:1.65;color:var(--text)">
            <strong>Hello, Arjun.</strong> I'm your NEXUS AI Copilot â€” trained on India's full alt data stack.<br><br>
            I can help you analyze signal correlations, detect alpha decay patterns, build composite signals from GST + UPI + SEBI data, or interpret today's regulatory changes. What would you like to explore?
          </div>
        </div>
      </div>
    </div>

    <!-- Input -->
    <div class="card" style="padding:12px 16px">
      <div style="display:flex;gap:10px;align-items:flex-end">
        <textarea id="ai-input" placeholder="Ask about signals, correlations, market events, strategy ideas..."
          style="flex:1;border:none;outline:none;font-family:inherit;font-size:13px;resize:none;height:42px;line-height:1.5;background:transparent;color:var(--text)" rows="2"
          onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();sendAIMessage();}"></textarea>
        <button onclick="sendAIMessage()" style="background:linear-gradient(135deg,#0071E3,#34C759);color:white;border:none;border-radius:10px;padding:10px 18px;font-size:12px;font-weight:700;cursor:pointer;font-family:inherit;transition:opacity 0.14s;white-space:nowrap"
          onmouseenter="this.style.opacity='0.85'" onmouseleave="this.style.opacity='1'">
          Send â†‘
        </button>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="grid-3" style="margin-top:14px">
      ${[{v:'â‚¹8.2Cr',l:'Alpha Generated',desc:'Cumulative platform alpha in last 12 months',c:'#30D158'},{v:'94%',l:'Signal Accuracy',desc:'AI-verified signal quality score across active feeds',c:'#0071E3'},{v:'2.4s',l:'Avg Latency',desc:'Mean time from event to AI-scored alert delivery',c:'#BF5AF2'}].map(m=>`
      <div class="card" style="text-align:center">
        <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:26px;color:${m.c};letter-spacing:-1px">${m.v}</div>
        <div style="font-weight:700;font-size:13px;margin:4px 0">${m.l}</div>
        <div style="font-size:11px;color:#636366;line-height:1.5">${m.desc}</div>
      </div>`).join('')}
    </div>
  </div>`;

  window.setPrompt = function(idx) {
    const prompts = [
      'Analyze my signal portfolio decay',
      'Find earnings surprises for BFSI next 30 days',
      'Build a GST + UPI composite signal',
      'Summarize today\'s SEBI circulars'
    ];
    document.getElementById('ai-input').value = prompts[idx];
    document.getElementById('ai-input').focus();
    // Pre-set mock index
    aiMockIdx = idx;
  };

  window.sendAIMessage = async function() {
    const input = document.getElementById('ai-input');
    const msg = input.value.trim();
    if (!msg) return;
    input.value = '';

    const hist = document.getElementById('chat-history');
    // User bubble
    hist.innerHTML += `<div style="display:flex;gap:10px;justify-content:flex-end">
      <div style="background:#0071E3;border-radius:12px 0 12px 12px;padding:10px 14px;max-width:75%;font-size:12.5px;line-height:1.6;color:white">${msg}</div>
      <div style="width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,#0071E3,#BF5AF2);display:flex;align-items:center;justify-content:center;font-size:11px;flex-shrink:0;color:white;font-weight:700">AK</div>
    </div>`;
    hist.scrollTop = hist.scrollHeight;

    // Pick mock response
    const mockData = aiMockResponses[aiMockIdx % aiMockResponses.length];
    aiMockIdx++;

    // Thinking trace container
    const traceId = 'trace-' + Date.now();
    hist.innerHTML += `<div id="${traceId}" style="display:flex;gap:10px">
      <div style="width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,#0071E3,#BF5AF2);display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0">ğŸ¤–</div>
      <div style="flex:1">
        <div class="ai-thinking">
          ${mockData.thinking.map((t,i) => `<div class="ai-thinking-line" id="${traceId}-line-${i}"><div class="thinking-dot"></div><span>${t}</span></div>`).join('')}
        </div>
        <div id="${traceId}-reply" style="display:none;background:var(--bg);border-radius:0 12px 12px 12px;padding:12px 14px;font-size:12.5px;line-height:1.65;margin-top:8px;color:var(--text)"></div>
      </div>
    </div>`;
    hist.scrollTop = hist.scrollHeight;

    // Animate thinking lines
    for (let i = 0; i < mockData.thinking.length; i++) {
      await new Promise(r => setTimeout(r, 1800));
      const lineEl = document.getElementById(`${traceId}-line-${i}`);
      if (lineEl) { lineEl.classList.add('visible', 'done'); }
      hist.scrollTop = hist.scrollHeight;
    }

    await new Promise(r => setTimeout(r, 600));

    // Show reply
    const replyEl = document.getElementById(`${traceId}-reply`);
    if (replyEl) {
      replyEl.style.display = 'block';
      replyEl.innerHTML = mockData.reply;
    }
    hist.scrollTop = hist.scrollHeight;
  };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DPDP COMPLIANCE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCompliance(c) {
  const checks = [
    {label:'Data Localisation',desc:'All personal data processed on India-based servers',status:'pass'},
    {label:'Consent Management',desc:'Granular consent framework for all 24 data providers via AA',status:'pass'},
    {label:'Data Fiduciary Registration',desc:'Registered as Significant Data Fiduciary under DPDP Act 2023',status:'pass'},
    {label:'Processing Purpose Limitation',desc:'Signal generation purposes documented and bounded',status:'pass'},
    {label:'Data Principal Rights',desc:'Right to access, correct, erase and nominate â€” portal live',status:'pass'},
    {label:'Cross-Border Transfer Controls',desc:'No personal data transferred outside India without approval',status:'pass'},
    {label:'Grievance Officer Appointment',desc:'Statutory Grievance Officer appointed and published',status:'pass'},
    {label:'SEBI Reg FD Compliance',desc:'No material non-public information in any signal dataset',status:'pass'},
    {label:'PDPB Data Processor Agreements',desc:'DPA signed with 21/24 providers (3 pending renewal)',status:'warn'},
    {label:'Annual Privacy Audit',desc:'Q4 2025 audit completed â€” next audit due Q4 2026',status:'pass'},
    {label:'Children\'s Data Protections',desc:'No minor data â€” verified in all 24 datasets',status:'pass'},
    {label:'AI Transparency Obligations',desc:'AI/ML model cards published under draft AI governance framework',status:'warn'},
  ];

  c.innerHTML = `<div class="page">
    <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:24px;letter-spacing:-0.8px;margin-bottom:5px">DPDP Compliance Dashboard</div>
    <div style="font-size:12.5px;color:#636366;margin-bottom:22px">Digital Personal Data Protection Act 2023 + SEBI Reg FD + PDPB compliance tracker</div>

    <div class="grid-3" style="margin-bottom:18px">
      <div class="card" style="text-align:center">
        <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:36px;color:#30D158;letter-spacing:-1px">98</div>
        <div style="font-size:11px;color:#AEAEB2;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-top:4px">Compliance Score</div>
        <div style="font-size:11.5px;color:#636366;margin-top:6px">Out of 100 â€” industry-leading for alt data</div>
      </div>
      <div class="card" style="text-align:center">
        <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:36px;color:#0071E3;letter-spacing:-1px">10/10</div>
        <div style="font-size:11px;color:#AEAEB2;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-top:4px">DPDP Principles</div>
        <div style="font-size:11.5px;color:#636366;margin-top:6px">All 10 DPDP principles fully addressed</div>
      </div>
      <div class="card" style="text-align:center">
        <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:36px;color:#BF5AF2;letter-spacing:-1px">2</div>
        <div style="font-size:11px;color:#AEAEB2;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;margin-top:4px">Open Items</div>
        <div style="font-size:11.5px;color:#636366;margin-top:6px">Minor â€” DPA renewal & AI transparency doc</div>
      </div>
    </div>

    <div class="card">
      <div class="card-title">Compliance Checklist</div>
      <div class="card-sub">All regulatory requirements â€” DPDP Act 2023, SEBI Reg FD, PDPB</div>
      ${checks.map(ch=>`
      <div class="compliance-row">
        <div class="compliance-check ${ch.status==='pass'?'check-pass':ch.status==='warn'?'check-warn':'check-fail'}">
          ${ch.status==='pass'?'âœ“':ch.status==='warn'?'!':'âœ—'}
        </div>
        <div style="flex:1">
          <div style="font-size:13px;font-weight:600">${ch.label}</div>
          <div style="font-size:11px;color:#636366;margin-top:2px">${ch.desc}</div>
        </div>
        <span class="badge ${ch.status==='pass'?'live':ch.status==='warn'?'warning':'hot'}">${ch.status==='pass'?'Compliant':ch.status==='warn'?'Action Required':'Non-Compliant'}</span>
      </div>`).join('')}
    </div>
  </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MARKET RESEARCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderResearch(c) {
  c.innerHTML = `<div class="page">
    <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:24px;letter-spacing:-0.8px;margin-bottom:5px">Market Research & Opportunity</div>
    <div style="font-size:12.5px;color:#636366;margin-bottom:22px">Evidence-based market analysis supporting the NEXUS platform opportunity in India's alt data ecosystem</div>

    <div class="research-grid">
      <div class="research-card" style="border-top:3px solid #0071E3">
        <div class="research-value" style="color:#0071E3">$290M</div>
        <div class="research-label">India Alt Data (2024)</div>
        <div class="research-desc">India alt data market size in 2024, projected to reach $4.4B by 2033 â€” <strong>35.2% CAGR</strong> per IMARC Group.</div>
      </div>
      <div class="research-card" style="border-top:3px solid #30D158">
        <div class="research-value" style="color:#30D158">35%</div>
        <div class="research-label">India Alt Data CAGR</div>
        <div class="research-desc">Fastest growing alt data market in Asia, driven by UPI, GSTN, and DPI stack giving India unique data advantages.</div>
      </div>
      <div class="research-card" style="border-top:3px solid #BF5AF2">
        <div class="research-value" style="color:#BF5AF2">94%</div>
        <div class="research-label">Quants Plan More Spend</div>
        <div class="research-desc">94% of quant professionals plan to increase alt data budgets in 2025 â€” demand is structural.</div>
      </div>
      <div class="research-card" style="border-top:3px solid #FF9F0A">
        <div class="research-value" style="color:#FF9F0A">$143B</div>
        <div class="research-label">Alt Data by 2031 (Global)</div>
        <div class="research-desc">Global alternative data market projected at $143.87B by 2031. Asia-Pacific registering 44.92% CAGR.</div>
      </div>
    </div>

    <div class="grid-2">
      <div class="card">
        <div class="card-title">ğŸ‡®ğŸ‡³ Why India Has an Unfair Alt Data Advantage</div>
        <div class="card-sub">India's DPI stack creates data signals unavailable in any other market</div>
        ${[
          {icon:'ğŸ’³',title:'UPI at Scale',stat:'15B+ tx/month',desc:'Real-time consumer spend intelligence at â‚¹1 ticket size â€” unparalleled in depth and frequency globally'},
          {icon:'ğŸ§¾',title:'GST Digital Infrastructure',stat:'130M+ filers',desc:'Monthly revenue signals from every registered business â€” 30-45 day earnings predictor'},
          {icon:'ğŸ”—',title:'Account Aggregator (AA)',stat:'81M consents',desc:'DEPA-standard consented financial data sharing â€” bank, insurance, MF, GST in one API'},
          {icon:'ğŸ›ï¸',title:'ONDC Open Commerce',stat:'15M tx/month',desc:'Open network GMV data across all D2C commerce categories â€” no single platform owns it'},
          {icon:'ğŸ“‹',title:'SEBI Digital Circulars',stat:'100% machine-readable',desc:'Every SEBI/RBI circular NLP-scored in real-time â€” regulatory alpha 2-3 hours ahead of market'},
          {icon:'ğŸ›ï¸',title:'MCA21 Corp Registry',stat:'250K+ unlisted firms',desc:'AI-parsed director networks, compliance scores, revenue proxies for unlisted companies'}
        ].map(i=>`
        <div style="display:flex;gap:12px;padding:10px 0;border-bottom:1px solid rgba(0,0,0,0.04)">
          <div style="width:34px;height:34px;border-radius:9px;background:var(--blue-bg);display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0">${i.icon}</div>
          <div style="flex:1">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:3px">
              <span style="font-weight:700;font-size:12.5px">${i.title}</span>
              <span style="font-family:'Syne',sans-serif;font-size:10px;font-weight:700;color:#0071E3">${i.stat}</span>
            </div>
            <div style="font-size:11px;color:#636366;line-height:1.5">${i.desc}</div>
          </div>
        </div>`).join('')}
      </div>

      <div style="display:flex;flex-direction:column;gap:14px">
        <div class="card">
          <div class="card-title">Competitive Landscape</div>
          <div class="card-sub">Where NEXUS sits in the global and India market</div>
          ${[
            {name:'Bloomberg Terminal',scope:'Global',gap:'No India-native DPI signals â€” GST, UPI, AA not available',threat:'Low'},
            {name:'Refinitiv / LSEG',scope:'Global',gap:'No real-time Indian regulatory signal processing',threat:'Low'},
            {name:'Quandl (NASDAQ)',scope:'Global',gap:'No India alt data specialization â€” generic emerging market',threat:'Medium'},
            {name:'Cube Wealth',scope:'India',gap:'Consumer WealthTech â€” not institutional quant intelligence',threat:'Low'},
            {name:'Tickertape / Screener',scope:'India',gap:'Fundamental screeners â€” no alt data or signal marketplace',threat:'Low'},
          ].map(r=>`
          <div style="padding:9px 0;border-bottom:1px solid rgba(0,0,0,0.04)">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:3px">
              <span style="font-weight:600;font-size:12.5px">${r.name}</span>
              <div style="display:flex;gap:6px">
                <span class="tag">${r.scope}</span>
                <span class="badge ${r.threat==='Low'?'live':r.threat==='Medium'?'warning':'hot'}">${r.threat} threat</span>
              </div>
            </div>
            <div style="font-size:11px;color:#636366">Gap: ${r.gap}</div>
          </div>`).join('')}
        </div>

        <div class="card">
          <div class="card-title">Total Addressable Market (India)</div>
          <div class="card-sub">NEXUS-specific TAM calculation</div>
          <div style="display:flex;flex-direction:column;gap:10px;margin-top:4px">
            ${[
              {label:'SEBI-Registered Quant Funds',val:'~2,400',note:'Primary TAM â€” institutional buyers'},
              {label:'Alternative Investment Funds (AIFs)',val:'~1,100',note:'Category II & III â€” growing rapidly'},
              {label:'Prop Desks (Banks + NBFCs)',val:'~400',note:'Algorithmic and systematic strategies'},
              {label:'HNI Quant Managers',val:'~6,000+',note:'Emerging segment â€” SEBI PMS registered'},
              {label:'Estimated Revenue per Subscriber/yr',val:'â‚¹12-45L',note:'Depending on tier and signal mix'},
            ].map(r=>`
            <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:10px">
              <div style="flex:1">
                <div style="font-size:12.5px;font-weight:500">${r.label}</div>
                <div style="font-size:10.5px;color:#AEAEB2;margin-top:1px">${r.note}</div>
              </div>
              <span style="font-family:'Syne',sans-serif;font-weight:700;font-size:13px;color:#0071E3;white-space:nowrap">${r.val}</span>
            </div>`).join('')}
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-title">India Alt Data Market Growth Projection (2024â€“2033)</div>
      <div class="card-sub">IMARC Group data â€” $290M to $4.4B at 35.2% CAGR</div>
      <div class="chart-wrap" style="height:220px"><canvas id="mktGrowthChart"></canvas></div>
    </div>
  </div>`;

  setTimeout(() => {
    const years = [2024,2025,2026,2027,2028,2029,2030,2031,2032,2033];
    const base = 290.5, cagr = 0.352;
    const vals = years.map((_,i) => +(base * Math.pow(1+cagr, i)).toFixed(0));
    charts.mktGrowth = new Chart(document.getElementById('mktGrowthChart'), {
      type:'bar',
      data:{labels:years,datasets:[{label:'India Alt Data Market ($M)',data:vals,backgroundColor:vals.map((_,i)=>i<2?'#0071E3':'rgba(0,113,227,0.4)'),borderRadius:6}]},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>` $${ctx.raw}M`}}},scales:{x:{grid:{display:false},ticks:{font:{size:10},color:'#AEAEB2'}},y:{grid:{color:'#F5F5F7'},ticks:{font:{size:10},color:'#AEAEB2',callback:v=>`$${v}M`}}}}
    });
  }, 50);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  10-YEAR ROADMAP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderRoadmap(c) {
  c.innerHTML = `<div class="page">
    <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:24px;letter-spacing:-0.8px;margin-bottom:5px">10-Year Strategic Roadmap</div>
    <div style="font-size:12.5px;color:#636366;margin-bottom:22px">Future-proofed product strategy to 2036 â€” built for India's next decade of data growth</div>

    <div style="background:linear-gradient(135deg,#1A1A2E,#0F3460);border-radius:var(--radius);padding:22px 26px;margin-bottom:20px;color:white">
      <div style="display:flex;gap:0">
        ${[
          {phase:'Phase 1',years:'2025â€“26',label:'Foundation',color:'#30D158',items:['Signal Marketplace MVP','10 core India signals','DPDP compliance layer','AI Copilot v1']},
          {phase:'Phase 2',years:'2027â€“28',label:'Scale',color:'#32ADE6',items:['Account Aggregator deep integration','ONDC & Bharat Mart signals','Real-time satellite geo-data','AI Signal Builder (NL â†’ signal)']},
          {phase:'Phase 3',years:'2029â€“31',label:'Moat',color:'#BF5AF2',items:['Tokenized data provenance (blockchain)','Cross-border UPI intelligence','India-global signal arbitrage','Institutional API licensing']},
          {phase:'Phase 4',years:'2032â€“36',label:'Platform',color:'#F0A500',items:['Full-stack quant OS','ASEAN expansion (DPI signals)','Autonomous signal generation','Public markets / IPO readiness']},
        ].map((p,i)=>`
        <div style="flex:1;padding:0 14px;${i>0?'border-left:1px solid rgba(255,255,255,0.1)':''}">
          <div style="font-size:9px;text-transform:uppercase;letter-spacing:1.2px;font-weight:700;opacity:0.5;margin-bottom:4px">${p.phase}</div>
          <div style="font-family:'Syne',sans-serif;font-size:15px;font-weight:800;color:${p.color};margin-bottom:2px">${p.label}</div>
          <div style="font-size:10px;opacity:0.5;margin-bottom:10px">${p.years}</div>
          ${p.items.map(it=>`<div style="font-size:11px;opacity:0.75;margin-bottom:4px;display:flex;gap:5px"><span style="color:${p.color}">â†’</span>${it}</div>`).join('')}
        </div>`).join('')}
      </div>
    </div>

    <div class="grid-2">
      <div class="card">
        <div class="card-title">Near-Term Wins (2026â€“2027)</div>
        <div class="card-sub">Highest-impact improvements with clear execution path</div>
        ${[
          {year:'Q2 2026',title:'Account Aggregator Deep Integration',desc:'Full Sahamati AA hub integration â€” add bank statement, insurance, MF signals to marketplace.',color:'#0071E3'},
          {year:'Q3 2026',title:'AI Signal Builder (Natural Language)',desc:'Let quant analysts describe a signal in plain English â€” AI builds it from available data sources.',color:'#BF5AF2'},
          {year:'Q4 2026',title:'ONDC Commerce Intelligence Layer',desc:'Ingest ONDC network GMV data â€” first platform to offer real-time open commerce as an investable signal.',color:'#FF9F0A'},
          {year:'Q1 2027',title:'Institutional API v2 with Webhooks',desc:'REST API + real-time webhooks for institutional quant desks. Enables direct integration into execution systems.',color:'#30D158'},
        ].map(m=>`
        <div class="roadmap-item">
          <div class="roadmap-year" style="color:${m.color}">${m.year}</div>
          <div class="roadmap-content">
            <div class="roadmap-title">${m.title}</div>
            <div class="roadmap-desc">${m.desc}</div>
          </div>
        </div>`).join('')}
      </div>

      <div class="card">
        <div class="card-title">10-Year Proof Factors</div>
        <div class="card-sub">Structural tailwinds that make NEXUS durable through 2036</div>
        ${[
          {icon:'ğŸ‡®ğŸ‡³',title:'India DPI Expanding',desc:"India Stack (UPI, AA, ONDC, DPDP) is deepening. Each new DPI layer creates new data signal categories.",score:98},
          {icon:'ğŸ¤–',title:'AI Amplifies Alt Data Value',desc:"Organizations using AI to process signals see 3x better alpha. NEXUS's AI layer becomes a compounding moat.",score:95},
          {icon:'ğŸ“‹',title:'Regulatory Tailwind (SEBI)',desc:"SEBI's BRSR mandate and AI governance frameworks all create demand for compliant, structured signal data.",score:91},
          {icon:'ğŸ’¼',title:'Quant Fund Growth in India',desc:"India's quant AUM growing 40%+ YoY. As discretionary managers systematize, alt data demand becomes core infrastructure.",score:88},
          {icon:'ğŸ”',title:'Compliance as Competitive Moat',desc:"DPDP Act 2023 raises the compliance bar significantly. NEXUS's early compliance architecture is a distribution advantage.",score:94},
        ].map(m=>`
        <div style="display:flex;gap:12px;padding:11px 0;border-bottom:1px solid rgba(0,0,0,0.04)">
          <div style="width:34px;height:34px;border-radius:9px;background:var(--bg);display:flex;align-items:center;justify-content:center;font-size:17px;flex-shrink:0">${m.icon}</div>
          <div style="flex:1">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:3px">
              <span style="font-weight:700;font-size:12.5px">${m.title}</span>
              <span style="font-family:'Syne',sans-serif;font-size:11px;font-weight:700;color:#30D158">${m.score}/100</span>
            </div>
            <div style="font-size:11px;color:#636366;line-height:1.5">${m.desc}</div>
          </div>
        </div>`).join('')}
      </div>
    </div>

    <div class="card" style="margin-top:0">
      <div class="card-title">Revenue Trajectory Model (2025â€“2030)</div>
      <div class="card-sub">Conservative scenario based on 35% market CAGR and 2% market share capture</div>
      <div class="chart-wrap" style="height:200px"><canvas id="revChart"></canvas></div>
    </div>
  </div>`;

  setTimeout(() => {
    charts.rev = new Chart(document.getElementById('revChart'), {
      type:'bar',
      data:{
        labels:['2025','2026','2027','2028','2029','2030'],
        datasets:[
          {label:'Data Revenue (â‚¹Cr)',data:[8.2,15.4,27.8,46.1,72.3,108.9],backgroundColor:'rgba(0,113,227,0.7)',borderRadius:6,stack:'a'},
          {label:'API & Licensing (â‚¹Cr)',data:[0,2.1,5.8,12.4,22.7,38.2],backgroundColor:'rgba(191,90,242,0.7)',borderRadius:6,stack:'a'},
          {label:'AI Copilot Revenue (â‚¹Cr)',data:[0,0,3.2,8.6,16.4,29.1],backgroundColor:'rgba(48,209,88,0.7)',borderRadius:6,stack:'a'},
        ]
      },
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{font:{size:10},boxWidth:10,padding:12}}},scales:{x:{stacked:true,grid:{display:false},ticks:{font:{size:10},color:'#AEAEB2'}},y:{stacked:true,grid:{color:'#F5F5F7'},ticks:{font:{size:10},color:'#AEAEB2',callback:v=>`â‚¹${v}Cr`}}}}
    });
  }, 50);
}

// â”€â”€â”€ INIT â”€â”€â”€
(function init() {
  NS.updateSidebarWidget();

  const content = document.getElementById('page-content');
  const page = document.createElement('div');
  page.id = 'active-page';
  content.appendChild(page);
  renderDashboard(page);

  // Welcome toast after short delay
  setTimeout(() => {
    showToast('NEXUS Platform Ready', 'Agent cycle running Â· 47 signals live Â· 0 decay alerts', 'info', 'âš¡');
  }, 1200);
})();
</script>
</body>
</html>
